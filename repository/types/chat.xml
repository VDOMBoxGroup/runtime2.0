<?xml version="1.0" encoding="utf-8"?>
<Type>
  <Information>
    <Name>chat</Name>
    <DisplayName>#Lang(001)</DisplayName>
    <Description>#Lang(002)</Description>
    <ClassName>VDOM_chat</ClassName>
    <ID>2096fdda-e97f-4e7c-8f8e-dd0e08e498e5</ID>
    <Icon>#Res(26dd9d86-01d9-f89e-46a7-3b4aebe6da44)</Icon>
    <EditorIcon>#Res(1e8e6ca9-8de0-bc18-5ab1-3b4b98385233)</EditorIcon>
    <StructureIcon>#Res(b215d669-dc2c-e425-88c2-3b4bcfb6d4e5)</StructureIcon>
    <Moveable>1</Moveable>
    <Resizable>3</Resizable>
    <Container>1</Container>
    <Category>Standard</Category>
    <Dynamic>0</Dynamic>
    <Version>1.766.6201</Version>
    <InterfaceType>1</InterfaceType>
    <OptimizationPriority>1</OptimizationPriority>
    <Containers>htmlcontainer, dialog, container, tablecell, form, password, dialog_2, vdomclass, flexcontainer</Containers>
    <Languages>en_US ,fr_FR ,ru_RU</Languages>
    <Handlers>on_update, on_compile</Handlers>
    <RemoteMethods/>
    <WCAG/>
    <XMLScriptName/>
  </Information>
  <Attributes>
    <Attribute>
      <Name>classname</Name>
      <DisplayName>#Lang(101)</DisplayName>
      <DefaultValue/>
      <Visible>1</Visible>
      <Help>#Lang(201)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(500)</CodeInterface>
      <Colorgroup>4</Colorgroup>
      <ErrorValidationMessage>#Lang(301)</ErrorValidationMessage>
      <RegularExpressionValidation>^.*$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>hierarchy</Name>
      <DisplayName>#Lang(102)</DisplayName>
      <DefaultValue>0</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(202)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(2)</CodeInterface>
      <Colorgroup>1</Colorgroup>
      <ErrorValidationMessage>#Lang(302)</ErrorValidationMessage>
      <RegularExpressionValidation>^\d+$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>top</Name>
      <DisplayName>#Lang(103)</DisplayName>
      <DefaultValue/>
      <Visible>1</Visible>
      <Help>#Lang(203)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(10)</CodeInterface>
      <Colorgroup>4</Colorgroup>
      <ErrorValidationMessage>#Lang(303)</ErrorValidationMessage>
      <RegularExpressionValidation>^(\d+(px|em|rem|vh|vw|%$)?|auto)?$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>left</Name>
      <DisplayName>#Lang(104)</DisplayName>
      <DefaultValue/>
      <Visible>1</Visible>
      <Help>#Lang(204)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(10)</CodeInterface>
      <Colorgroup>4</Colorgroup>
      <ErrorValidationMessage>#Lang(304)</ErrorValidationMessage>
      <RegularExpressionValidation>^(\d+(px|em|rem|vh|vw|%$)?|auto)?$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>width</Name>
      <DisplayName>#Lang(105)</DisplayName>
      <DefaultValue/>
      <Visible>1</Visible>
      <Help>#Lang(205)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(10)</CodeInterface>
      <Colorgroup>4</Colorgroup>
      <ErrorValidationMessage>#Lang(305)</ErrorValidationMessage>
      <RegularExpressionValidation>^(\d+(px|em|rem|vh|vw|%$)?|auto)?$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>height</Name>
      <DisplayName>#Lang(106)</DisplayName>
      <DefaultValue/>
      <Visible>1</Visible>
      <Help>#Lang(206)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(10)</CodeInterface>
      <Colorgroup>4</Colorgroup>
      <ErrorValidationMessage>#Lang(306)</ErrorValidationMessage>
      <RegularExpressionValidation>^(\d+(px|em|rem|vh|vw|%$)?|auto)?$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>ws_server</Name>
      <DisplayName>#Lang(107)</DisplayName>
      <DefaultValue/>
      <Visible>1</Visible>
      <Help>#Lang(207)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField()</CodeInterface>
      <Colorgroup>2</Colorgroup>
      <ErrorValidationMessage>#Lang(307)</ErrorValidationMessage>
      <RegularExpressionValidation/>
    </Attribute>
    <Attribute>
      <Name>url</Name>
      <DisplayName>#Lang(108)</DisplayName>
      <DefaultValue/>
      <Visible>1</Visible>
      <Help>#Lang(208)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField()</CodeInterface>
      <Colorgroup>2</Colorgroup>
      <ErrorValidationMessage>#Lang(308)</ErrorValidationMessage>
      <RegularExpressionValidation/>
    </Attribute>
    <Attribute>
      <Name>guid</Name>
      <DisplayName>#Lang(109)</DisplayName>
      <DefaultValue/>
      <Visible>1</Visible>
      <Help>#Lang(209)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField()</CodeInterface>
      <Colorgroup>2</Colorgroup>
      <ErrorValidationMessage>#Lang(309)</ErrorValidationMessage>
      <RegularExpressionValidation/>
    </Attribute>
    <Attribute>
      <Name>email</Name>
      <DisplayName>#Lang(111)</DisplayName>
      <DefaultValue/>
      <Visible>1</Visible>
      <Help>#Lang(211)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField()</CodeInterface>
      <Colorgroup>2</Colorgroup>
      <ErrorValidationMessage>#Lang(311)</ErrorValidationMessage>
      <RegularExpressionValidation/>
    </Attribute>
    <Attribute>
      <Name>variables</Name>
      <DisplayName>#Lang(112)</DisplayName>
      <DefaultValue/>
      <Visible>1</Visible>
      <Help>#Lang(212)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>MultiLine()</CodeInterface>
      <Colorgroup>2</Colorgroup>
      <ErrorValidationMessage>#Lang(312)</ErrorValidationMessage>
      <RegularExpressionValidation/>
    </Attribute>
    <Attribute>
      <Name>project_guid</Name>
      <DisplayName>#Lang(113)</DisplayName>
      <DefaultValue/>
      <Visible>1</Visible>
      <Help>#Lang(213)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField()</CodeInterface>
      <Colorgroup>2</Colorgroup>
      <ErrorValidationMessage>#Lang(313)</ErrorValidationMessage>
      <RegularExpressionValidation/>
    </Attribute>
    <Attribute>
      <Name>user_access_token</Name>
      <DisplayName>#Lang(114)</DisplayName>
      <DefaultValue/>
      <Visible>1</Visible>
      <Help>#Lang(214)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField()</CodeInterface>
      <Colorgroup>2</Colorgroup>
      <ErrorValidationMessage>#Lang(314)</ErrorValidationMessage>
      <RegularExpressionValidation/>
    </Attribute>
    <Attribute>
      <Name>skin_websocket</Name>
      <DisplayName>#Lang(115)</DisplayName>
      <DefaultValue>0</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(215)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>DropDown((#Lang(401)|0)|(#Lang(402)|1)|(#Lang(403)|2)|(#Lang(404)|3))</CodeInterface>
      <Colorgroup>2</Colorgroup>
      <ErrorValidationMessage>#Lang(315)</ErrorValidationMessage>
      <RegularExpressionValidation/>
    </Attribute>
    <Attribute>
      <Name>positioning</Name>
      <DisplayName>#Lang(116)</DisplayName>
      <DefaultValue>static</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(216)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>DropDown((#Lang(405)|absolute)|(#Lang(406)|fixed)|(#Lang(407)|relative)|(#Lang(408)|static))</CodeInterface>
      <Colorgroup>4</Colorgroup>
      <ErrorValidationMessage>#Lang(316)</ErrorValidationMessage>
      <RegularExpressionValidation>^(static|fixed|absolute|relative)$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>displaying</Name>
      <DisplayName>#Lang(117)</DisplayName>
      <DefaultValue/>
      <Visible>1</Visible>
      <Help>#Lang(217)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>DropDown((#Lang(409)|block)|(#Lang(411)|inline)|(#Lang(412)|flex)|(#Lang(413)|inline-block)|(#Lang(414)|))</CodeInterface>
      <Colorgroup>4</Colorgroup>
      <ErrorValidationMessage>#Lang(317)</ErrorValidationMessage>
      <RegularExpressionValidation/>
    </Attribute>
    <Attribute>
      <Name>lang</Name>
      <DisplayName>#Lang(118)</DisplayName>
      <DefaultValue>en</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(218)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>DropDown((#Lang(415)|en)|(#Lang(416)|fr))</CodeInterface>
      <Colorgroup>2</Colorgroup>
      <ErrorValidationMessage>#Lang(318)</ErrorValidationMessage>
      <RegularExpressionValidation/>
    </Attribute>
    <Attribute>
      <Name>onstart</Name>
      <DisplayName>#Lang(119)</DisplayName>
      <DefaultValue>0</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(219)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>DropDown((#Lang(417)|0)|(#Lang(418)|1))</CodeInterface>
      <Colorgroup>2</Colorgroup>
      <ErrorValidationMessage>#Lang(319)</ErrorValidationMessage>
      <RegularExpressionValidation/>
    </Attribute>
    <Attribute>
      <Name>avatar</Name>
      <DisplayName>#Lang(121)</DisplayName>
      <DefaultValue/>
      <Visible>1</Visible>
      <Help>#Lang(221)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>File()</CodeInterface>
      <Colorgroup>2</Colorgroup>
      <ErrorValidationMessage>#Lang(321)</ErrorValidationMessage>
      <RegularExpressionValidation/>
    </Attribute>
    <Attribute>
      <Name>avatar_externalurl</Name>
      <DisplayName>#Lang(122)</DisplayName>
      <DefaultValue/>
      <Visible>1</Visible>
      <Help>#Lang(222)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>MultiLine()</CodeInterface>
      <Colorgroup>2</Colorgroup>
      <ErrorValidationMessage>#Lang(322)</ErrorValidationMessage>
      <RegularExpressionValidation/>
    </Attribute>
    <Attribute>
      <Name>agent_name</Name>
      <DisplayName>#Lang(123)</DisplayName>
      <DefaultValue/>
      <Visible>1</Visible>
      <Help>#Lang(223)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(50)</CodeInterface>
      <Colorgroup>2</Colorgroup>
      <ErrorValidationMessage>#Lang(323)</ErrorValidationMessage>
      <RegularExpressionValidation/>
    </Attribute>
    <Attribute>
      <Name>style</Name>
      <DisplayName>#Lang(124)</DisplayName>
      <DefaultValue/>
      <Visible>1</Visible>
      <Help>#Lang(224)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>MultiLine(10000)</CodeInterface>
      <Colorgroup>4</Colorgroup>
      <ErrorValidationMessage>#Lang(324)</ErrorValidationMessage>
      <RegularExpressionValidation/>
    </Attribute>
    <Attribute>
      <Name>skin</Name>
      <DisplayName>#Lang(125)</DisplayName>
      <DefaultValue>1</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(225)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>DropDown((#Lang(419)|0)|(#Lang(421)|1))</CodeInterface>
      <Colorgroup>4</Colorgroup>
      <ErrorValidationMessage>#Lang(325)</ErrorValidationMessage>
      <RegularExpressionValidation/>
    </Attribute>
    <Attribute>
      <Name>margins</Name>
      <DisplayName>#Lang(126)</DisplayName>
      <DefaultValue/>
      <Visible>1</Visible>
      <Help>#Lang(226)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(32)</CodeInterface>
      <Colorgroup>4</Colorgroup>
      <ErrorValidationMessage>#Lang(326)</ErrorValidationMessage>
      <RegularExpressionValidation>^[ \t]*(((-?\d{0,4}\.?\d{1,2})(px|em|ex|pt|cm|mm|in|%)|auto)[ \t]+){0,3}((-?\d{0,4}\.?\d{1,2})(px|em|ex|pt|cm|mm|in|%)|auto|)[ \t]*$|^$|^[ \t]*inherit[ \t]*$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>paddings</Name>
      <DisplayName>#Lang(127)</DisplayName>
      <DefaultValue/>
      <Visible>1</Visible>
      <Help>#Lang(227)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(32)</CodeInterface>
      <Colorgroup>4</Colorgroup>
      <ErrorValidationMessage>#Lang(327)</ErrorValidationMessage>
      <RegularExpressionValidation>^[ \t]*(((-?\d{0,4}\.?\d{1,2})(px|em|ex|pt|cm|mm|in|%)|auto)[ \t]+){0,3}((-?\d{0,4}\.?\d{1,2})(px|em|ex|pt|cm|mm|in|%)|auto|)[ \t]*$|^$|^[ \t]*inherit[ \t]*$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>zindex</Name>
      <DisplayName>#Lang(128)</DisplayName>
      <DefaultValue>0</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(228)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(2)</CodeInterface>
      <Colorgroup>1</Colorgroup>
      <ErrorValidationMessage>#Lang(328)</ErrorValidationMessage>
      <RegularExpressionValidation>^\d{1,2}$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>visible</Name>
      <DisplayName>#Lang(129)</DisplayName>
      <DefaultValue>1</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(229)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>DropDown((#Lang(422)|0)|(#Lang(423)|1))</CodeInterface>
      <Colorgroup>1</Colorgroup>
      <ErrorValidationMessage>#Lang(329)</ErrorValidationMessage>
      <RegularExpressionValidation>^[01]$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>stateful</Name>
      <DisplayName>#Lang(131)</DisplayName>
      <DefaultValue>0</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(231)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>DropDown((#Lang(424)|0)|(#Lang(425)|1))</CodeInterface>
      <Colorgroup>1</Colorgroup>
      <ErrorValidationMessage>#Lang(331)</ErrorValidationMessage>
      <RegularExpressionValidation>^[01]$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>ide_top</Name>
      <DisplayName>#Lang(132)</DisplayName>
      <DefaultValue>0</DefaultValue>
      <Visible>0</Visible>
      <Help>#Lang(232)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(4)</CodeInterface>
      <Colorgroup>1</Colorgroup>
      <ErrorValidationMessage>#Lang(332)</ErrorValidationMessage>
      <RegularExpressionValidation/>
    </Attribute>
    <Attribute>
      <Name>ide_left</Name>
      <DisplayName>#Lang(133)</DisplayName>
      <DefaultValue>0</DefaultValue>
      <Visible>0</Visible>
      <Help>#Lang(233)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(4)</CodeInterface>
      <Colorgroup>1</Colorgroup>
      <ErrorValidationMessage>#Lang(333)</ErrorValidationMessage>
      <RegularExpressionValidation/>
    </Attribute>
    <Attribute>
      <Name>ide_width</Name>
      <DisplayName>#Lang(134)</DisplayName>
      <DefaultValue>200</DefaultValue>
      <Visible>0</Visible>
      <Help>#Lang(234)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(4)</CodeInterface>
      <Colorgroup>1</Colorgroup>
      <ErrorValidationMessage>#Lang(334)</ErrorValidationMessage>
      <RegularExpressionValidation/>
    </Attribute>
    <Attribute>
      <Name>ide_height</Name>
      <DisplayName>#Lang(135)</DisplayName>
      <DefaultValue>300</DefaultValue>
      <Visible>0</Visible>
      <Help>#Lang(235)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(4)</CodeInterface>
      <Colorgroup>1</Colorgroup>
      <ErrorValidationMessage>#Lang(335)</ErrorValidationMessage>
      <RegularExpressionValidation/>
    </Attribute>
  </Attributes>
  <Languages>
    <Language Code="en_US">
      <Sentence ID="001">Chat</Sentence>
      <Sentence ID="002">The chat type contains an area for displaying messages and user input, as well as buttons for performing specific actions such as sending a message, confirming or canceling an operation.</Sentence>
      <Sentence ID="003"></Sentence>
      <Sentence ID="101">CSS Class</Sentence>
      <Sentence ID="102">Hierarchy</Sentence>
      <Sentence ID="103">Top</Sentence>
      <Sentence ID="104">Left</Sentence>
      <Sentence ID="105">Width</Sentence>
      <Sentence ID="106">Height</Sentence>
      <Sentence ID="107">Websocket Server</Sentence>
      <Sentence ID="108">Url</Sentence>
      <Sentence ID="109">Guid</Sentence>
      <Sentence ID="111">Email</Sentence>
      <Sentence ID="112">Variables</Sentence>
      <Sentence ID="113">Project Guid</Sentence>
      <Sentence ID="114">User Access Token</Sentence>
      <Sentence ID="115">Skin WebSocket</Sentence>
      <Sentence ID="116">Position</Sentence>
      <Sentence ID="117">Display</Sentence>
      <Sentence ID="118">Language</Sentence>
      <Sentence ID="119">Show chat</Sentence>
      <Sentence ID="121">Avatar</Sentence>
      <Sentence ID="122">Avatar External URL</Sentence>
      <Sentence ID="123">Agent name</Sentence>
      <Sentence ID="124">Style</Sentence>
      <Sentence ID="125">Skin</Sentence>
      <Sentence ID="126">Margins</Sentence>
      <Sentence ID="127">Paddings</Sentence>
      <Sentence ID="128">Z-Index</Sentence>
      <Sentence ID="129">Visibility</Sentence>
      <Sentence ID="131"></Sentence>
      <Sentence ID="132">IDE_top</Sentence>
      <Sentence ID="133">IDE_left</Sentence>
      <Sentence ID="134">IDE_width</Sentence>
      <Sentence ID="135">IDE_height</Sentence>
      <Sentence ID="201">The name of the CSS class.</Sentence>
      <Sentence ID="202">Order of rendering the object on the page. By default the value of hierarchy is 0, that means, that the object will be rendered in the order it is written in the XML-file of the VDOM application.</Sentence>
      <Sentence ID="203">Spacing from the top edge of the parent object to the current object.</Sentence>
      <Sentence ID="204">Spacing from the left edge of the parent object to the current object.</Sentence>
      <Sentence ID="205">Width of the object in pixels.</Sentence>
      <Sentence ID="206">Height of the object in pixels.</Sentence>
      <Sentence ID="207">newAttribute20</Sentence>
      <Sentence ID="208">A parameter containing information about the host on which the chat component is running</Sentence>
      <Sentence ID="209">A parameter representing a globally unique identifier for the chat script.</Sentence>
      <Sentence ID="211">Parameter containing the user's e-mail address.</Sentence>
      <Sentence ID="212">The value is passed as a string encoded in URL format. Variables that can be passed to chat for use in a script.</Sentence>
      <Sentence ID="213">newAttribute30</Sentence>
      <Sentence ID="214">newAttribute31</Sentence>
      <Sentence ID="215">When any skin is selected, the data for the selected skin is copied to the url, guid, email, variables attributes. When user changes the value of these attributes, skin switches to User defined.</Sentence>
      <Sentence ID="216">newAttribute12</Sentence>
      <Sentence ID="217">newAttribute13</Sentence>
      <Sentence ID="218">newAttribute25</Sentence>
      <Sentence ID="219">newAttribute23</Sentence>
      <Sentence ID="221">newAttribute21</Sentence>
      <Sentence ID="222">The URL of the image located somewhere on the Internet.</Sentence>
      <Sentence ID="223">newAttribute22</Sentence>
      <Sentence ID="224">newAttribute18</Sentence>
      <Sentence ID="225">newAttribute19</Sentence>
      <Sentence ID="226">newAttribute10</Sentence>
      <Sentence ID="227">newAttribute11</Sentence>
      <Sentence ID="228">Position in visual hierarchy of objects. If you have several objects in one container situated on each other, the z-index indicates the order of their displaying. The larger z-index is, the upper the object lies.</Sentence>
      <Sentence ID="229">Visibility of the object</Sentence>
      <Sentence ID="231"></Sentence>
      <Sentence ID="232">newAttribute26</Sentence>
      <Sentence ID="233">newAttribute27</Sentence>
      <Sentence ID="234">newAttribute28</Sentence>
      <Sentence ID="235">newAttribute29</Sentence>
      <Sentence ID="301">Incorrect value.</Sentence>
      <Sentence ID="302">Incorrect value, must be positive integer from 0 to 99.</Sentence>
      <Sentence ID="303">Incorrect value, must be positive integer from 0 to 9999.</Sentence>
      <Sentence ID="304">Incorrect value, must be positive integer from 0 to 9999.</Sentence>
      <Sentence ID="305">Incorrect value, must be positive integer from 0 to 999999.</Sentence>
      <Sentence ID="306">Incorrect value, must be positive integer from 0 to 999999.</Sentence>
      <Sentence ID="307">newAttribute20</Sentence>
      <Sentence ID="308"></Sentence>
      <Sentence ID="309"></Sentence>
      <Sentence ID="311"></Sentence>
      <Sentence ID="312"></Sentence>
      <Sentence ID="313">newAttribute30</Sentence>
      <Sentence ID="314">newAttribute31</Sentence>
      <Sentence ID="315"></Sentence>
      <Sentence ID="316">newAttribute12</Sentence>
      <Sentence ID="317"></Sentence>
      <Sentence ID="318">newAttribute25</Sentence>
      <Sentence ID="319">newAttribute23</Sentence>
      <Sentence ID="321">newAttribute21</Sentence>
      <Sentence ID="322">Incorrect value</Sentence>
      <Sentence ID="323">newAttribute22</Sentence>
      <Sentence ID="324"></Sentence>
      <Sentence ID="325"></Sentence>
      <Sentence ID="326">Incorrect value.</Sentence>
      <Sentence ID="327">Incorrect value.</Sentence>
      <Sentence ID="328">Incorrect value, must be positive integer from 0 to 9999.</Sentence>
      <Sentence ID="329">Incorrect value, must be either 0 or 1</Sentence>
      <Sentence ID="331"></Sentence>
      <Sentence ID="332">newAttribute26</Sentence>
      <Sentence ID="333">newAttribute27</Sentence>
      <Sentence ID="334">newAttribute28</Sentence>
      <Sentence ID="335">newAttribute29</Sentence>
      <Sentence ID="401"></Sentence>
      <Sentence ID="402">Preset 1</Sentence>
      <Sentence ID="403">Preset 2</Sentence>
      <Sentence ID="404">User data</Sentence>
      <Sentence ID="405">Absolute</Sentence>
      <Sentence ID="406">Fixed</Sentence>
      <Sentence ID="407">Relative</Sentence>
      <Sentence ID="408">Static</Sentence>
      <Sentence ID="409">Block</Sentence>
      <Sentence ID="411">Inline</Sentence>
      <Sentence ID="412">Flex</Sentence>
      <Sentence ID="413">Inline-block</Sentence>
      <Sentence ID="414"></Sentence>
      <Sentence ID="415">EN</Sentence>
      <Sentence ID="416">FR</Sentence>
      <Sentence ID="417">No</Sentence>
      <Sentence ID="418">Yes</Sentence>
      <Sentence ID="419">User defined</Sentence>
      <Sentence ID="421">Empty</Sentence>
      <Sentence ID="422">Invisible</Sentence>
      <Sentence ID="423">Visible</Sentence>
      <Sentence ID="424"></Sentence>
      <Sentence ID="425"></Sentence>
      <Sentence ID="501">Change the cursor type when it points at the object</Sentence>
      <Sentence ID="502">Start dragging the object</Sentence>
      <Sentence ID="503">Stop dragging the object</Sentence>
      <Sentence ID="504">Hide the object</Sentence>
      <Sentence ID="505">Set transparency of the object</Sentence>
      <Sentence ID="506">Show the object</Sentence>
      <Sentence ID="507">A call to the start() function with the required parameters (url, guid, email, variables) will create the corresponding WebSocket socket</Sentence>
      <Sentence ID="508">Toggle CSS class</Sentence>
      <Sentence ID="509"></Sentence>
      <Sentence ID="511"></Sentence>
      <Sentence ID="512"></Sentence>
      <Sentence ID="513"></Sentence>
      <Sentence ID="514"></Sentence>
      <Sentence ID="515"></Sentence>
      <Sentence ID="516"></Sentence>
      <Sentence ID="517"></Sentence>
      <Sentence ID="518"></Sentence>
      <Sentence ID="519"></Sentence>
      <Sentence ID="521"></Sentence>
      <Sentence ID="601">changeCursor</Sentence>
      <Sentence ID="602">dragStart</Sentence>
      <Sentence ID="603">dragStop</Sentence>
      <Sentence ID="604">Hide</Sentence>
      <Sentence ID="605">setTransparency</Sentence>
      <Sentence ID="606">Show</Sentence>
      <Sentence ID="607">start</Sentence>
      <Sentence ID="608">toggleClass</Sentence>
      <Sentence ID="701">cursorType</Sentence>
      <Sentence ID="702">Fade</Sentence>
      <Sentence ID="703">Transparency</Sentence>
      <Sentence ID="704">Fade</Sentence>
      <Sentence ID="705">email</Sentence>
      <Sentence ID="706">guid</Sentence>
      <Sentence ID="707">url</Sentence>
      <Sentence ID="708">variables</Sentence>
      <Sentence ID="709">ws_server</Sentence>
      <Sentence ID="711">project_guid</Sentence>
      <Sentence ID="712">className</Sentence>
      <Sentence ID="801">New cursor type</Sentence>
      <Sentence ID="802">Fade time</Sentence>
      <Sentence ID="803">The value of transparency</Sentence>
      <Sentence ID="804">Fade effect, time is indicated in milliseconds</Sentence>
      <Sentence ID="805">value must be in quotes</Sentence>
      <Sentence ID="806">value must be in quotes</Sentence>
      <Sentence ID="807">value must be in quotes</Sentence>
      <Sentence ID="808">value must be in quotes</Sentence>
      <Sentence ID="809">value must be in quotes</Sentence>
      <Sentence ID="811">value must be in quotes</Sentence>
      <Sentence ID="812">Name of CSS class</Sentence>
      <Sentence ID="901">Current Y-value</Sentence>
      <Sentence ID="902">Current Y-value</Sentence>
      <Sentence ID="903"></Sentence>
      <Sentence ID="904">Current Y-value</Sentence>
      <Sentence ID="905">Current Y-value</Sentence>
      <Sentence ID="906">cellData</Sentence>
      <Sentence ID="907">Current Y-value</Sentence>
      <Sentence ID="908">Current Y-value</Sentence>
      <Sentence ID="909">Current Y-value</Sentence>
      <Sentence ID="911">Current Y-value</Sentence>
      <Sentence ID="912">Current Y-value</Sentence>
      <Sentence ID="913">Current Y-value</Sentence>
      <Sentence ID="914">Current Y-value</Sentence>
      <Sentence ID="915">Current Y-value</Sentence>
      <Sentence ID="916">Current Y-value</Sentence>
      <Sentence ID="917">Current Y-value</Sentence>
      <Sentence ID="918">Current Y-value</Sentence>
      <Sentence ID="919">Current Y-value</Sentence>
      <Sentence ID="921">socket parameters</Sentence>
    </Language>
    <Language Code="fr_FR">
      <Sentence ID="001">Chat</Sentence>
      <Sentence ID="002">Chat AI Assistant numérique</Sentence>
      <Sentence ID="003"></Sentence>
      <Sentence ID="101"></Sentence>
      <Sentence ID="102">Hiérarchie</Sentence>
      <Sentence ID="103">Haut</Sentence>
      <Sentence ID="104">Gauche</Sentence>
      <Sentence ID="105">Largeur</Sentence>
      <Sentence ID="106">Hauteur</Sentence>
      <Sentence ID="107"></Sentence>
      <Sentence ID="108">Url</Sentence>
      <Sentence ID="109"></Sentence>
      <Sentence ID="111"></Sentence>
      <Sentence ID="112"></Sentence>
      <Sentence ID="113"></Sentence>
      <Sentence ID="114"></Sentence>
      <Sentence ID="115"></Sentence>
      <Sentence ID="116"></Sentence>
      <Sentence ID="117"></Sentence>
      <Sentence ID="118"></Sentence>
      <Sentence ID="119"></Sentence>
      <Sentence ID="121"></Sentence>
      <Sentence ID="122"></Sentence>
      <Sentence ID="123"></Sentence>
      <Sentence ID="124"></Sentence>
      <Sentence ID="125"></Sentence>
      <Sentence ID="126"></Sentence>
      <Sentence ID="127"></Sentence>
      <Sentence ID="128">Z-Index</Sentence>
      <Sentence ID="129">Visibilité</Sentence>
      <Sentence ID="131"></Sentence>
      <Sentence ID="132"></Sentence>
      <Sentence ID="133"></Sentence>
      <Sentence ID="134"></Sentence>
      <Sentence ID="135"></Sentence>
      <Sentence ID="201"></Sentence>
      <Sentence ID="202">Hiérarchie de l'objet, ordre de chargement de l'objet par rapport aux autres</Sentence>
      <Sentence ID="203">Distance depuis le bord haut de l'objet parent en pixels</Sentence>
      <Sentence ID="204">Distance depuis le bord gauche de l'objet parent en pixels</Sentence>
      <Sentence ID="205">Largeur de l'objet en pixels</Sentence>
      <Sentence ID="206">Hauteur de l'objet en pixels</Sentence>
      <Sentence ID="207"></Sentence>
      <Sentence ID="208">Un paramètre contenant des informations sur l'hôte sur lequel le composant de chat est exécuté.</Sentence>
      <Sentence ID="209">Un paramètre représentant un identifiant unique pour le script de chat.</Sentence>
      <Sentence ID="211">Paramètre contenant l'adresse électronique de l'utilisateur.</Sentence>
      <Sentence ID="212">La valeur est transmise sous la forme d'une chaîne encodée au format URL. Variables pouvant être transmises à chat pour être utilisées dans un script.</Sentence>
      <Sentence ID="213"></Sentence>
      <Sentence ID="214"></Sentence>
      <Sentence ID="215">Lorsqu'un skin est sélectionné, les données de ce skin sont copiées dans les attributs url, guid, email, variables. Lorsque l'utilisateur modifie la valeur de ces attributs, l'apparence devient définie par l'utilisateur.</Sentence>
      <Sentence ID="216"></Sentence>
      <Sentence ID="217"></Sentence>
      <Sentence ID="218"></Sentence>
      <Sentence ID="219"></Sentence>
      <Sentence ID="221"></Sentence>
      <Sentence ID="222"></Sentence>
      <Sentence ID="223"></Sentence>
      <Sentence ID="224"></Sentence>
      <Sentence ID="225"></Sentence>
      <Sentence ID="226"></Sentence>
      <Sentence ID="227"></Sentence>
      <Sentence ID="228">Niveau de superposition de l'objet par rapport aux autres</Sentence>
      <Sentence ID="229">Afficher ou cacher l'objet</Sentence>
      <Sentence ID="231"></Sentence>
      <Sentence ID="232"></Sentence>
      <Sentence ID="233"></Sentence>
      <Sentence ID="234"></Sentence>
      <Sentence ID="235"></Sentence>
      <Sentence ID="301"></Sentence>
      <Sentence ID="302">Valeur Incorrecte, doit être positive</Sentence>
      <Sentence ID="303">Valeur Incorrecte, doit être positive</Sentence>
      <Sentence ID="304">Valeur Incorrecte, doit être positive</Sentence>
      <Sentence ID="305">Valeur Incorrecte, doit être positive</Sentence>
      <Sentence ID="306">Valeur Incorrecte, doit être positive</Sentence>
      <Sentence ID="307"></Sentence>
      <Sentence ID="308"></Sentence>
      <Sentence ID="309"></Sentence>
      <Sentence ID="311"></Sentence>
      <Sentence ID="312"></Sentence>
      <Sentence ID="313"></Sentence>
      <Sentence ID="314"></Sentence>
      <Sentence ID="315"></Sentence>
      <Sentence ID="316"></Sentence>
      <Sentence ID="317"></Sentence>
      <Sentence ID="318"></Sentence>
      <Sentence ID="319"></Sentence>
      <Sentence ID="321"></Sentence>
      <Sentence ID="322"></Sentence>
      <Sentence ID="323"></Sentence>
      <Sentence ID="324"></Sentence>
      <Sentence ID="325"></Sentence>
      <Sentence ID="326"></Sentence>
      <Sentence ID="327"></Sentence>
      <Sentence ID="328">Valeur Incorrecte, doit être positive</Sentence>
      <Sentence ID="329">Valeur Incorrecte, must be 0 or 1</Sentence>
      <Sentence ID="331"></Sentence>
      <Sentence ID="332"></Sentence>
      <Sentence ID="333"></Sentence>
      <Sentence ID="334"></Sentence>
      <Sentence ID="335"></Sentence>
      <Sentence ID="401"></Sentence>
      <Sentence ID="402"></Sentence>
      <Sentence ID="403"></Sentence>
      <Sentence ID="404"></Sentence>
      <Sentence ID="405"></Sentence>
      <Sentence ID="406"></Sentence>
      <Sentence ID="407"></Sentence>
      <Sentence ID="408"></Sentence>
      <Sentence ID="409"></Sentence>
      <Sentence ID="411"></Sentence>
      <Sentence ID="412"></Sentence>
      <Sentence ID="413"></Sentence>
      <Sentence ID="414"></Sentence>
      <Sentence ID="415"></Sentence>
      <Sentence ID="416"></Sentence>
      <Sentence ID="417"></Sentence>
      <Sentence ID="418"></Sentence>
      <Sentence ID="419"></Sentence>
      <Sentence ID="421"></Sentence>
      <Sentence ID="422">Invisible</Sentence>
      <Sentence ID="423">Visible</Sentence>
      <Sentence ID="424"></Sentence>
      <Sentence ID="425"></Sentence>
      <Sentence ID="501">Visibilité</Sentence>
      <Sentence ID="502">Start drag action</Sentence>
      <Sentence ID="503">Stop drag action</Sentence>
      <Sentence ID="504">Hide the object</Sentence>
      <Sentence ID="505">Set new transparency</Sentence>
      <Sentence ID="506">Show the object</Sentence>
      <Sentence ID="507">Un appel à la fonction start() avec les paramètres requis (url, guid, email, variables) créera le socket WebSocket correspondant.</Sentence>
      <Sentence ID="508"></Sentence>
      <Sentence ID="509"></Sentence>
      <Sentence ID="511"></Sentence>
      <Sentence ID="512"></Sentence>
      <Sentence ID="513"></Sentence>
      <Sentence ID="514"></Sentence>
      <Sentence ID="515"></Sentence>
      <Sentence ID="516"></Sentence>
      <Sentence ID="517"></Sentence>
      <Sentence ID="518"></Sentence>
      <Sentence ID="519"></Sentence>
      <Sentence ID="521"></Sentence>
      <Sentence ID="601">Visibilité</Sentence>
      <Sentence ID="602">dragStart</Sentence>
      <Sentence ID="603">dragStop</Sentence>
      <Sentence ID="604">Hide</Sentence>
      <Sentence ID="605">setTransparency</Sentence>
      <Sentence ID="606">Show</Sentence>
      <Sentence ID="607">start</Sentence>
      <Sentence ID="608"></Sentence>
      <Sentence ID="701">Valeur Incorrecte, must be 0 or 1</Sentence>
      <Sentence ID="702">Fade</Sentence>
      <Sentence ID="703">Transparency</Sentence>
      <Sentence ID="704">Fade</Sentence>
      <Sentence ID="705">email</Sentence>
      <Sentence ID="706">guid</Sentence>
      <Sentence ID="707">url</Sentence>
      <Sentence ID="708">variables</Sentence>
      <Sentence ID="709"></Sentence>
      <Sentence ID="711"></Sentence>
      <Sentence ID="712"></Sentence>
      <Sentence ID="801">Valeur Incorrecte, must be 0 or 1</Sentence>
      <Sentence ID="802">Fade time</Sentence>
      <Sentence ID="803">New transparency value</Sentence>
      <Sentence ID="804">Time of appearance</Sentence>
      <Sentence ID="805">la valeur doit être entre guillemets</Sentence>
      <Sentence ID="806">la valeur doit être entre guillemets</Sentence>
      <Sentence ID="807">la valeur doit être entre guillemets</Sentence>
      <Sentence ID="808">la valeur doit être entre guillemets</Sentence>
      <Sentence ID="809"></Sentence>
      <Sentence ID="811"></Sentence>
      <Sentence ID="812"></Sentence>
      <Sentence ID="901">Current Y-value</Sentence>
      <Sentence ID="902">Current Y-value</Sentence>
      <Sentence ID="903"></Sentence>
      <Sentence ID="904">Current Y-value</Sentence>
      <Sentence ID="905">Current Y-value</Sentence>
      <Sentence ID="906"></Sentence>
      <Sentence ID="907">Current Y-value</Sentence>
      <Sentence ID="908">Current Y-value</Sentence>
      <Sentence ID="909">Current Y-value</Sentence>
      <Sentence ID="911">Current Y-value</Sentence>
      <Sentence ID="912">Current Y-value</Sentence>
      <Sentence ID="913">Current Y-value</Sentence>
      <Sentence ID="914">Current Y-value</Sentence>
      <Sentence ID="915">Current Y-value</Sentence>
      <Sentence ID="916">Current Y-value</Sentence>
      <Sentence ID="917">Current Y-value</Sentence>
      <Sentence ID="918">Current Y-value</Sentence>
      <Sentence ID="919">Current Y-value</Sentence>
      <Sentence ID="921"></Sentence>
    </Language>
    <Language Code="ru_RU">
      <Sentence ID="001">Чат</Sentence>
      <Sentence ID="002">Цифровой помощник AI Chat</Sentence>
      <Sentence ID="003"></Sentence>
      <Sentence ID="101"></Sentence>
      <Sentence ID="102">Иерархия</Sentence>
      <Sentence ID="103">Сверху</Sentence>
      <Sentence ID="104">Слева</Sentence>
      <Sentence ID="105">Ширина</Sentence>
      <Sentence ID="106">Высота</Sentence>
      <Sentence ID="107"></Sentence>
      <Sentence ID="108">Url-адресс</Sentence>
      <Sentence ID="109"></Sentence>
      <Sentence ID="111"></Sentence>
      <Sentence ID="112"></Sentence>
      <Sentence ID="113"></Sentence>
      <Sentence ID="114"></Sentence>
      <Sentence ID="115"></Sentence>
      <Sentence ID="116"></Sentence>
      <Sentence ID="117"></Sentence>
      <Sentence ID="118"></Sentence>
      <Sentence ID="119"></Sentence>
      <Sentence ID="121"></Sentence>
      <Sentence ID="122"></Sentence>
      <Sentence ID="123"></Sentence>
      <Sentence ID="124"></Sentence>
      <Sentence ID="125"></Sentence>
      <Sentence ID="126"></Sentence>
      <Sentence ID="127"></Sentence>
      <Sentence ID="128">Позиция</Sentence>
      <Sentence ID="129">Отображение</Sentence>
      <Sentence ID="131"></Sentence>
      <Sentence ID="132"></Sentence>
      <Sentence ID="133"></Sentence>
      <Sentence ID="134"></Sentence>
      <Sentence ID="135"></Sentence>
      <Sentence ID="201"></Sentence>
      <Sentence ID="202">Приоритет в потоке гипертекста</Sentence>
      <Sentence ID="203">Расстояние от верхней границы родительского контейнера до объекта в пикселях</Sentence>
      <Sentence ID="204">Расстояние от левой границы родительского контейнера до объекта в пикселях</Sentence>
      <Sentence ID="205">Ширина объекта в пикселях</Sentence>
      <Sentence ID="206">Высота объекта в пикселях</Sentence>
      <Sentence ID="207"></Sentence>
      <Sentence ID="208">Параметр, содержащий информацию о хосте, на котором запущен компонент чата</Sentence>
      <Sentence ID="209">Параметр, представляющий глобально уникальный идентификатор сценария чата.</Sentence>
      <Sentence ID="211">Параметр, содержащий адрес электронной почты пользователя.</Sentence>
      <Sentence ID="212">Значение передается в виде строки, закодированной в формате URL. Переменные, которые могут быть переданы в чат для использования в сценарии.</Sentence>
      <Sentence ID="213"></Sentence>
      <Sentence ID="214"></Sentence>
      <Sentence ID="215">При выборе любого скина, данные для выбранного skin копируется в атрибуты url, guid, email, variables. При изменении значения пользователем у данных атрибутов, skin переключается на User defined.</Sentence>
      <Sentence ID="216"></Sentence>
      <Sentence ID="217"></Sentence>
      <Sentence ID="218"></Sentence>
      <Sentence ID="219"></Sentence>
      <Sentence ID="221"></Sentence>
      <Sentence ID="222"></Sentence>
      <Sentence ID="223"></Sentence>
      <Sentence ID="224"></Sentence>
      <Sentence ID="225"></Sentence>
      <Sentence ID="226"></Sentence>
      <Sentence ID="227"></Sentence>
      <Sentence ID="228">Положение в визуальной иерархии объектов</Sentence>
      <Sentence ID="229">Режим отображения объекта</Sentence>
      <Sentence ID="231"></Sentence>
      <Sentence ID="232"></Sentence>
      <Sentence ID="233"></Sentence>
      <Sentence ID="234"></Sentence>
      <Sentence ID="235"></Sentence>
      <Sentence ID="301"></Sentence>
      <Sentence ID="302">Неправильное значение, должно быть указано целое положительное число</Sentence>
      <Sentence ID="303">Неправильное значение, должно быть указано целое положительное число</Sentence>
      <Sentence ID="304">Неправильное значение, должно быть указано целое положительное число</Sentence>
      <Sentence ID="305">Неправильное значение, должно быть указано целое положительное число</Sentence>
      <Sentence ID="306">Неправильное значение, должно быть указано целое положительное число</Sentence>
      <Sentence ID="307"></Sentence>
      <Sentence ID="308"></Sentence>
      <Sentence ID="309"></Sentence>
      <Sentence ID="311"></Sentence>
      <Sentence ID="312"></Sentence>
      <Sentence ID="313"></Sentence>
      <Sentence ID="314"></Sentence>
      <Sentence ID="315"></Sentence>
      <Sentence ID="316"></Sentence>
      <Sentence ID="317"></Sentence>
      <Sentence ID="318"></Sentence>
      <Sentence ID="319"></Sentence>
      <Sentence ID="321"></Sentence>
      <Sentence ID="322"></Sentence>
      <Sentence ID="323"></Sentence>
      <Sentence ID="324"></Sentence>
      <Sentence ID="325"></Sentence>
      <Sentence ID="326"></Sentence>
      <Sentence ID="327"></Sentence>
      <Sentence ID="328">Неправильное значение, должно быть указано целое число от 0 до 99</Sentence>
      <Sentence ID="329">Неправильное значение, должен быть указан 0 или 1</Sentence>
      <Sentence ID="331"></Sentence>
      <Sentence ID="332"></Sentence>
      <Sentence ID="333"></Sentence>
      <Sentence ID="334"></Sentence>
      <Sentence ID="335"></Sentence>
      <Sentence ID="401"></Sentence>
      <Sentence ID="402"></Sentence>
      <Sentence ID="403"></Sentence>
      <Sentence ID="404"></Sentence>
      <Sentence ID="405"></Sentence>
      <Sentence ID="406"></Sentence>
      <Sentence ID="407"></Sentence>
      <Sentence ID="408"></Sentence>
      <Sentence ID="409"></Sentence>
      <Sentence ID="411"></Sentence>
      <Sentence ID="412"></Sentence>
      <Sentence ID="413"></Sentence>
      <Sentence ID="414"></Sentence>
      <Sentence ID="415"></Sentence>
      <Sentence ID="416"></Sentence>
      <Sentence ID="417"></Sentence>
      <Sentence ID="418"></Sentence>
      <Sentence ID="419"></Sentence>
      <Sentence ID="421"></Sentence>
      <Sentence ID="422">Не отображать</Sentence>
      <Sentence ID="423">Отображать</Sentence>
      <Sentence ID="424"></Sentence>
      <Sentence ID="425"></Sentence>
      <Sentence ID="501">Изменить вид курсора</Sentence>
      <Sentence ID="502">Начать операцию перетаскивания</Sentence>
      <Sentence ID="503">Закончить операцию перетаскивания</Sentence>
      <Sentence ID="504">Скрыть объект</Sentence>
      <Sentence ID="505">Установить значение прозрачности</Sentence>
      <Sentence ID="506">Показать объект</Sentence>
      <Sentence ID="507">Вызов функции start() с передачей нужных параметров (url, guid, email, variables) создаст соответствующий сокет WebSocket</Sentence>
      <Sentence ID="508"></Sentence>
      <Sentence ID="509"></Sentence>
      <Sentence ID="511"></Sentence>
      <Sentence ID="512"></Sentence>
      <Sentence ID="513"></Sentence>
      <Sentence ID="514"></Sentence>
      <Sentence ID="515"></Sentence>
      <Sentence ID="516"></Sentence>
      <Sentence ID="517"></Sentence>
      <Sentence ID="518"></Sentence>
      <Sentence ID="519"></Sentence>
      <Sentence ID="521"></Sentence>
      <Sentence ID="601">Изменить курсор</Sentence>
      <Sentence ID="602">Начать перетаскивание</Sentence>
      <Sentence ID="603">Закончить перетаскивание</Sentence>
      <Sentence ID="604">Скрыть</Sentence>
      <Sentence ID="605">Установить прозрачность</Sentence>
      <Sentence ID="606">Показать</Sentence>
      <Sentence ID="607">start</Sentence>
      <Sentence ID="608"></Sentence>
      <Sentence ID="701">Изменить тип курсора</Sentence>
      <Sentence ID="702">Исчезновение</Sentence>
      <Sentence ID="703">Прозрачность</Sentence>
      <Sentence ID="704">Исчезновение</Sentence>
      <Sentence ID="705">email</Sentence>
      <Sentence ID="706">guid</Sentence>
      <Sentence ID="707">url-адресс</Sentence>
      <Sentence ID="708">переменные</Sentence>
      <Sentence ID="709"></Sentence>
      <Sentence ID="711"></Sentence>
      <Sentence ID="712"></Sentence>
      <Sentence ID="801">Новый тип курсора</Sentence>
      <Sentence ID="802">Время исчезновения</Sentence>
      <Sentence ID="803">Новое значение прозрачности</Sentence>
      <Sentence ID="804">Время исчезновения</Sentence>
      <Sentence ID="805">значение должно быть в кавычках</Sentence>
      <Sentence ID="806">значение должно быть в кавычках</Sentence>
      <Sentence ID="807">значение должно быть в кавычках</Sentence>
      <Sentence ID="808">значение должно быть в кавычках</Sentence>
      <Sentence ID="809"></Sentence>
      <Sentence ID="811"></Sentence>
      <Sentence ID="812"></Sentence>
      <Sentence ID="901">Текущее значение Y</Sentence>
      <Sentence ID="902">Текущее значение Y</Sentence>
      <Sentence ID="903"></Sentence>
      <Sentence ID="904">Текущее значение Y</Sentence>
      <Sentence ID="905">Текущее значение Y</Sentence>
      <Sentence ID="906"></Sentence>
      <Sentence ID="907">Текущее значение Y</Sentence>
      <Sentence ID="908">Текущее значение Y</Sentence>
      <Sentence ID="909">Текущее значение Y</Sentence>
      <Sentence ID="911">Текущее значение Y</Sentence>
      <Sentence ID="912">Текущее значение Y</Sentence>
      <Sentence ID="913">Текущее значение Y</Sentence>
      <Sentence ID="914">Текущее значение Y</Sentence>
      <Sentence ID="915">Текущее значение Y</Sentence>
      <Sentence ID="916">Текущее значение Y</Sentence>
      <Sentence ID="917">Текущее значение Y</Sentence>
      <Sentence ID="918">Текущее значение Y</Sentence>
      <Sentence ID="919">Текущее значение Y</Sentence>
      <Sentence ID="921"></Sentence>
    </Language>
  </Languages>
  <Resources>
    <Resource ID="26dd9d86-01d9-f89e-46a7-3b4aebe6da44" Name="chatbot.png" Type="png"><![CDATA[iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAABRRJREFUeJztm12MXVMUgL9bMzq9ZswIRpvWCKZ+gwehwTQSI20JHkq0aWm81E9K4kEmpA+aiIh4adIQQZVE+iBEeVBVU0kp46dTf5MZRUJLSTOkHVOmU+71sNbJPq7ze88++9zE/ZKVc+89++y11j5777PO2vtCkyZNmvyPKRVtQAQXA9cCVwLnAnOBk4AqcAjYD4wBu4C3gL3FmGmXMrAGGEEcTSMfAbcDLc6ttkAJWAUcwDh0GNgMrAYuA04FWoHj9fMC4G7gZeCI77pvgOvdmp+NU4A3MA4cAO4BZqWoowO4Hxj31bMJ6VENTS9yx6rAFLCWbEZ3Ao8Bx7TOYWB2Rhtz4yzgR8xdv8Ji3f3Ar5gh0XCN0InM2lXgC2SGt02vT8cwDTYcXkEM+xnoyVHPfExPeD5HPam4GTHoD+ByB/r6MXPCdQ70RdIKfIsYs86h3kdU514KjhNWYSa9dod6ZyGRYxUJlgrjQzXirogyaSPAWgnjPkzEWAg9mAjvhIhyeTVAJzLvVIFzvB9n1OVKfSzR41YkdA2jlFHCOAxs08+LvR9dNsACPe5wqLOWQT32eT+4bIAL9fi5Q521fKbH84tQ/gMy/k4rQrkyB5NPcM4ZwMPI62wUeU2CIOFwFfgLnS+yZIR6kcnkKuA8xMEOPTcB7EMyNu8jk893CeuNcyKOKJ86kbs/DbTVo6sFWAl8QPo7swtYARyXVqlF5qst++u5eAnm7SqLjAGLMjiRhT61YU+ai8rAc2R3vFaeIV3WxwYPqO4Xkl7QDezGvvOefILk91yxVfXekaRwN9Jd83LePySiGsHWU+BEYBKoIBN2JGXyvfNBPaEt5wYY0PPb45yHfMZ8nDydxLA6mYnJP94UV3hRiIEuJK+MjZcQ+YqY8L8FO4+6emUU+3HCpUjg8ze+l6AwbrPgRFZZntXjGrwkTOAQq+0Oaywrr4d7LdfnheBnxhXsJfldehUTxHQA7waUGYjQ9XhE3ZUkxqZgNvCb1r2y9qS/ByyuPRnBRuBP/fw78GK91gVQwm6o/AvwoH5eT0TMsZlkd38ak9F9U4/zIsp76a9ygro9eSmlk+1I0nMUWWx5HXgIuBrJP5aAnVr3prBK9iQ07j0tfwHSXb11t68tNsCnek03surbhyRV29WhecBCZL7Ygkl2BskxJKh7GzPE+oMaYDyiEr+s0/JemnmFfn/SYgMc1GvmJCxfQeahpcDZyFjfgESY0wHlR4Ia4GhCZQu1/Bb9vlG/L7XYAFN6TSvwLDAE/ITE8pNIVPexnlutDRVGWW0eAF5DhshgUMHJBIZNEp7S6kJSTTYbIHf8T4GDoaUMO5EuFcQhZBnaBhOW6oklbQN4XWct/75jd+rvtnL++yzVE4u/AZJsM/MaoHYW9b6/k9kiYdRSPanwVm7DZBxpsDYkCIo7V28kWCV68dQq/h6wXZWHMYg8bvr4b/LiZGRj4xSSMc5CFbOG5xwvWipSvECrEG4IMcql3Jq7lxGUgC8DjHIlIxS7cALIGA8KaFzINQ78S8QTuHf+KSeeJaSL5O8GNmSI8LR4ITyKO+dHkQ3TDcNFBL9C5nXnXS6NxTIDk0V1MeYbqtuDZIWjjD4Scz6JjNBAs72fuchWMs/Qo0hvWI/k6nuQZ/QtyGaHCsmdriAR3jLcbsyKxb+dZAOygWlIZZjoxMTpwI3I31kuQbIyXYiDE8imqDHE8W3A93ZNb9KkSZMmmfkHIzEfa5WtSXAAAAAASUVORK5CYII=]]></Resource>
    <Resource ID="b215d669-dc2c-e425-88c2-3b4bcfb6d4e5" Name="chatbot_structure.png" Type="png"><![CDATA[iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsEAAA7BAbiRa+0AAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAABXElEQVQ4T53TSyhEURzH8YM8MpLyWCAWElZSQrKQELZeCxvZWlnZKlL2smdpoYSNRyiRzAillDzKjIWNMiPj7fvTPTUzNaf41efeOXfu/M85/3vH/CHZnrikeGdX6tCG9N+RMW/YxJkGaTo40o1erGMNR/jEkHe+dhWoQB9m8YgC5OIBAQzg3FWgC5fwowPVKIcKHSADJYkFStEEza49b0OpwhdeEcYtMlGZykHRYBx7WMEqpjEM5RgRaN+WfhO1K5jCBPKga5IPbeMbS9DTKMQHbtCJU5gaaFm6URfuPMu4xxPqEZsyTMKnmXowCC1xDOq4GjaHRhRDBdWTZrSiFg0Iqgc+KBeI4gpaphpXBCUL73jGBhYwAzXTtEPL38cOtrCIUah5+q4fSZODXehG6wWaTZ8PoWefNFqe3u3YApaamtjAuOjPpL2O4ATqbgt0XVuaRwjO2JfpHzHmB73PVzJQZS/7AAAAAElFTkSuQmCC]]></Resource>
    <Resource ID="1e8e6ca9-8de0-bc18-5ab1-3b4b98385233" Name="chatbot_editor.png" Type="png"><![CDATA[iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsEAAA7BAbiRa+0AAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAACLklEQVRIS83VSYjPYRzH8b99XwbhMNYhJiUHUQblIK6yUw4OJuVGWS7mwMWWkzUOkrLk4kRRsk1zU0qiUGSLse/b+/2b55fHr/+/eeZfyqdezTy/+f+f7fd9nin963QKP6tJT0xEX7zDbXzFX6lmgP7YiCl4DTvtgQFowQ58QlVxxtexC2N9EGUc9uIyin9LymDcwNKsVTmrcBUDbXRki3biI7aiJijmFdy27eiMzakDDMJxLMNbLA6KOR04+5NYhKTMxtG2X5NzBNMrrWAMrBJn0gqXrlswS1BuBafgCswenG/79U/G4wTe41fEzg+jDsaBR6EfPAe57sizHw3xCmbB0YdlrfJ5Cvf1GrpgC3ohz8WgG85itW/ajER7nZvhOIMRcAC37GbECZgVeIwXWYscRLwlsc/wtHo6f4Zn+1ApXeEK67MWcR8dKe/QOp6KbaF9CNOwAM/DM2eaHaQobreF4Sq9LtYiezgJeXWYc7DErH1flJ9ZCb8wJ7TNfPhdZ+z9NAEO/g0OPgP1vgMvqjjNeAKXeR9Whl8YgrgozAN8x100wfJtxCasgYNlpZfv7RfMwyWsw248xEwcgO/Dz/3AZLQbK8G7fDm8zN7ATrzQRsMB3e+X8Cw0oDfuwXfk7JOyHs4s1QZ0KK7kDsp1VnQF8eFKylyU66zoAoYiOVaFe+rpdFYec+/8hbAE/Tfo9WwZH4P3kQWRHAewTC3DZz6IUos++IBHPvgPUyr9Bh+lnVTQ/uXaAAAAAElFTkSuQmCC]]></Resource>
    <Resource ID="04c8a774-6d4f-84d7-ebaa-c0cac1d2622d" Name="chatbox.js" Type="js"><![CDATA[DQpmdW5jdGlvbiBzdGFydCh3c19zZXJ2ZXIsIHVybCwgZ3VpZCwgZW1haWwsIHZhcmlhYmxlcywgcHJvamVjdF9ndWlkID0gJycpIHsNCiAgICANCiAgICBnZXRQcmV2aW91c1NvY2tldE9iaigpOw0KDQogICAgd3Nfc2VydmVyID0gd3Nfc2VydmVyIHx8IHdpbmRvdy51c2VyVXJpIHx8ICcnOw0KICAgIHVybCA9IHVybCB8fCB3aW5kb3cuaG9zdFVybCB8fCAnJzsNCiAgICBndWlkID0gZ3VpZCB8fCB3aW5kb3cuc2NlbmFyaW9HdWlkIHx8ICcnOw0KICAgIGVtYWlsID0gZW1haWwgfHwgd2luZG93LnVzZXJFbWFpbCB8fCAnJzsNCiAgICB2YXJpYWJsZXMgPSB2YXJpYWJsZXMgfHwgd2luZG93LnVzZXJWYXJpYWJsZXMgfHwgJyc7DQogICAgcHJvamVjdF9ndWlkID0gcHJvamVjdF9ndWlkIHx8IHdpbmRvdy51c2VyUHJvamVjdCB8fCAnJzsNCg0KICAgIGlmICh3aW5kb3cuY2hhdF9zb2NrZXQpIHsNCiAgICAgICAgd2luZG93LmNoYXRfc29ja2V0LmNsb3NlKDEwMDAsICJOb3JtYWwgQ2xvc3VyZSIpOw0KICAgICAgICB3aW5kb3cuY2hhdF9zb2NrZXQgPSBudWxsOw0KICAgIH0NCg0KICAgIGNvbnN0IGNoYXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIudmRvbV9jaGF0Iik7DQoNCiAgICBpZiAoIXdzX3NlcnZlciB8fCAhdXJsIHx8ICFndWlkIHx8ICFlbWFpbCB8fCAhdmFyaWFibGVzKSB7DQogICAgICAgIGlmICghaXNGaXJzdFN0YXJ0KSB7DQogICAgICAgICAgICBjb25zb2xlLndhcm4oIk5vdCBhbGwgcGFyYW1ldGVycyBhcmUgcGFzc2VkIHRvIGNyZWF0ZSB0aGUgd2luZG93LmNoYXRfc29ja2V0LiIpOw0KICAgICAgICB9DQogICAgICAgIGlzRmlyc3RTdGFydCA9IGZhbHNlOw0KICAgICAgICBjaGF0LmNsYXNzTGlzdC5hZGQoImluYWN0aXZlIik7DQogICAgICAgIHJldHVybjsNCiAgICB9IGVsc2Ugew0KICAgICAgICBjaGF0LmNsYXNzTGlzdC5yZW1vdmUoImluYWN0aXZlIik7DQogICAgfQ0KDQogICAgd2luZG93LmN1cnJlbnRTb2NrZXQgPSB7DQogICAgICAgIHdzX3NlcnZlcjogd3Nfc2VydmVyLA0KICAgICAgICB1cmw6IHVybCwNCiAgICAgICAgZ3VpZDogZ3VpZCwNCiAgICAgICAgZW1haWw6IGVtYWlsLA0KICAgICAgICB2YXJpYWJsZXM6IHZhcmlhYmxlcywNCiAgICAgICAgcHJvamVjdF9ndWlkOiBwcm9qZWN0X2d1aWQsDQogICAgICAgIHVzZXJfYWNjZXNzX3Rva2VuOiB3aW5kb3cudXNlckFjY2Vzc1Rva2VuIHx8ICcnDQogICAgfTsNCg0KICAgIGlmICghaXNDaGF0UmVzdGFydGluZyAmJiB3aW5kb3cucHJldmlvdXNTb2NrZXQgJiYgaXNTYW1lU29ja2V0KHdpbmRvdy5wcmV2aW91c1NvY2tldCkpIHsNCiAgICAgICAgaXNDaGF0UmVjb25uZWN0aW5nID0gdHJ1ZTsNCiAgICB9IGVsc2Ugew0KICAgICAgICBpc0NoYXRSZXN0YXJ0aW5nID0gZmFsc2U7DQogICAgfQ0KDQogICAgY29uc3QgbG9jYWxpemF0aW9uID0gew0KICAgICAgICAiZW4iOiB7DQogICAgICAgICAgICAiUmVzdGFydCBjaGF0IjogIlJlc3RhcnQgY2hhdCIsDQogICAgICAgICAgICAiU3RhcnQgY29udmVyc2F0aW9uIGFnYWluPyI6ICJTdGFydCBjb252ZXJzYXRpb24gYWdhaW4/IiwNCiAgICAgICAgICAgICJZZXMiOiAiWWVzIiwNCiAgICAgICAgICAgICJObyI6ICJObyIsDQogICAgICAgICAgICAiQ2xvc2UiOiAiQ2xvc2UiLA0KICAgICAgICAgICAgIkNhbmNlbCI6ICJDYW5jZWwiLA0KICAgICAgICAgICAgIk5PIjogIk5PIiwNCiAgICAgICAgICAgICJZRVMiOiAiWUVTIiwNCiAgICAgICAgICAgICJDQU5DRUwiOiAiQ0FOQ0VMIiwNCiAgICAgICAgICAgICJUeXBlIHNvbWV0aGluZy4uLiI6ICJUeXBlIHNvbWV0aGluZy4uLiINCiAgICAgICAgfSwNCiAgICAgICAgImZyIjogew0KICAgICAgICAgICAgIlJlc3RhcnQgY2hhdCI6ICJSZWxhbmNlciBsZSBjaGF0IiwNCiAgICAgICAgICAgICJTdGFydCBjb252ZXJzYXRpb24gYWdhaW4/IjogIsOKdGVzLXZvdXMgc3VyIGRlIHZvdWxvaXIgcmVkw6ltYXJyZXIgdm90cmUgY29udmVyc2F0aW9uPyIsDQogICAgICAgICAgICAiWWVzIjogIk91aSIsDQogICAgICAgICAgICAiTm8iOiAiTm9uIiwNCiAgICAgICAgICAgICJDbG9zZSI6ICJBYmFuZG9ubmVyIiwNCiAgICAgICAgICAgICJDYW5jZWwiOiAiQW5udWxlciIsDQogICAgICAgICAgICAiTk8iOiAiTk9OIiwNCiAgICAgICAgICAgICJZRVMiOiAiT1VJIiwNCiAgICAgICAgICAgICJDQU5DRUwiOiAiQU5OVUxFUiIsDQogICAgICAgICAgICAiVHlwZSBzb21ldGhpbmcuLi4iOiAiVGFwZXogcXVlbHF1ZSBjaG9zZS4uLiINCiAgICAgICAgfQ0KICAgIH07DQogICAgY29uc3QgbGFuZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52ZG9tX2NoYXQnKS5nZXRBdHRyaWJ1dGUoJ2xhbmcnKTsNCiAgICBjb25zdCBlbGVtZW50c1RvVHJhbnNsYXRlID0gew0KICAgICAgICAiLnBvcHVwX3Jlc3RhcnRfY2hhdCI6IFsiaDIiLCAicCIsICIud2luX2J1dHRvbnMgYnV0dG9uIl0sDQogICAgICAgICIuc2VuZGluZ19tZXNzYWdlX2hvbGRlciI6IFsiLnNlbmRpbmdfbWVzc2FnZSBpbnB1dCJdLA0KICAgICAgICAiLmNoYXRfd3JhcHBlciI6IFsiLmFza19idXR0b25zIGJ1dHRvbiJdDQogICAgfTsNCg0KICAgIGlmIChsb2NhbGl6YXRpb25bbGFuZ10pIHsNCiAgICAgICAgT2JqZWN0LmtleXMoZWxlbWVudHNUb1RyYW5zbGF0ZSkuZm9yRWFjaChwYXJlbnRDbGFzcyA9PiB7DQogICAgICAgICAgICBjb25zdCBwYXJlbnRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihwYXJlbnRDbGFzcyk7DQogICAgICAgICAgICBpZiAocGFyZW50RWxlbWVudCkgew0KICAgICAgICAgICAgICAgIGVsZW1lbnRzVG9UcmFuc2xhdGVbcGFyZW50Q2xhc3NdLmZvckVhY2goc2VsZWN0b3IgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50cyA9IHBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7DQogICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzLmZvckVhY2goZWxlbWVudCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwbGFjZWhvbGRlclRleHQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWxpemF0aW9uW2xhbmddW3BsYWNlaG9sZGVyVGV4dF0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJywgbG9jYWxpemF0aW9uW2xhbmddW3BsYWNlaG9sZGVyVGV4dF0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJhbnNsYXRpb25LZXkgPSBlbGVtZW50LnRleHRDb250ZW50LnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWxpemF0aW9uW2xhbmddW3RyYW5zbGF0aW9uS2V5XSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gbG9jYWxpemF0aW9uW2xhbmddW3RyYW5zbGF0aW9uS2V5XTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQoNCiAgICBjb25zdCB0cmFuc2xhdGVXb3JkID0gKHdvcmQsIGxhbmcpID0+IHsNCiAgICAgICAgY29uc3QgbG9jYWxpemF0aW9uID0gew0KICAgICAgICAgICAgImVuIjogew0KICAgICAgICAgICAgICAgICJZRVMiOiAiWUVTIiwNCiAgICAgICAgICAgICAgICAiTk8iOiAiTk8iLA0KICAgICAgICAgICAgICAgICJDQU5DRUwiOiAiQ0FOQ0VMIiwNCiAgICAgICAgICAgICAgICAiRm9ybSBkYXRhIHRyYW5zbWl0dGVkIjogIkZvcm0gZGF0YSB0cmFuc21pdHRlZCIsDQogICAgICAgICAgICAgICAgIlVwbG9hZCBpbWFnZSI6ICJVcGxvYWQgaW1hZ2UiLA0KICAgICAgICAgICAgICAgICJTZWxlY3QgcGhvdG8iOiAiU2VsZWN0IHBob3RvIiwNCiAgICAgICAgICAgICAgICAiRHJhZyBhIHBob3RvIGhlcmU8YnIvPk9yIjogIkRyYWcgYSBwaG90byBoZXJlPGJyLz5PciINCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICAiZnIiOiB7DQogICAgICAgICAgICAgICAgIllFUyI6ICJPVUkiLA0KICAgICAgICAgICAgICAgICJOTyI6ICJOT04iLA0KICAgICAgICAgICAgICAgICJDQU5DRUwiOiAiQU5OVUxFUiIsDQogICAgICAgICAgICAgICAgIkZvcm0gZGF0YSB0cmFuc21pdHRlZCI6ICJEb25uw6llcyBkdSBmb3JtdWxhaXJlIHRyYW5zbWlzZXMiLA0KICAgICAgICAgICAgICAgICJVcGxvYWQgaW1hZ2UiOiAiVMOpbMOpY2hhcmdlciBsJ2ltYWdlIiwNCiAgICAgICAgICAgICAgICAiU2VsZWN0IHBob3RvIjogIlPDqWxlY3Rpb25uZXIgdW5lIHBob3RvIiwNCiAgICAgICAgICAgICAgICAiRHJhZyBhIHBob3RvIGhlcmU8YnIvPk9yIjogIkZhaXRlcyBnbGlzc2VyIHVuZSBwaG90byBpY2k8YnIvPk91Ig0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IHdvcmRzVG9SZXBsYWNlUGF0dGVybiA9IG5ldyBSZWdFeHAoT2JqZWN0LmtleXMobG9jYWxpemF0aW9uW2xhbmddKS5qb2luKCJ8IiksICJnIik7DQoNCiAgICAgICAgcmV0dXJuIHdvcmQucmVwbGFjZSh3b3Jkc1RvUmVwbGFjZVBhdHRlcm4sIG1hdGNoID0+IGxvY2FsaXphdGlvbltsYW5nXVttYXRjaF0pOw0KICAgIH07DQoNCiAgICBjb25zdCBjaGF0Ym94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNoYXRib3giKTsNCg0KICAgIGxldCBmb3JtQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZvcm1fY29udGFpbmVyIik7DQogICAgbGV0IGlmcmFtZUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJpZnJhbWVfY29udGFpbmVyIik7DQogICAgbGV0IHR5cGluZ19tZXNzYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInR5cGluZ19tZXNzYWdlIik7DQoNCiAgICBsZXQgc3RyX3Byb2plY3QgPSAnJzsNCiAgICANCiAgICBpZiAocHJvamVjdF9ndWlkKSB7DQogICAgICAgIHN0cl9wcm9qZWN0ID0gYCZwcm9qZWN0X2d1aWQ9JHtwcm9qZWN0X2d1aWR9YDsNCiAgICB9DQoNCiAgICBsZXQgc3RyX3Rva2VuID0gJyc7DQogICAgaWYgKHdpbmRvdy51c2VyQWNjZXNzVG9rZW4pIHsNCiAgICAgICAgc3RyX3Rva2VuID0gYCZ1c2VyX2FjY2Vzc190b2tlbj0ke3dpbmRvdy51c2VyQWNjZXNzVG9rZW59YDsNCiAgICB9DQoNCiAgICBsZXQgc3RyX3ZhcmlhYmxlcyA9IGlzQWxyZWFkeUVuY29kZWQodmFyaWFibGVzKSA/IHZhcmlhYmxlcyA6IGVuY29kZVVSSUNvbXBvbmVudCh2YXJpYWJsZXMpOw0KDQogICAgd2luZG93LmNoYXRfc29ja2V0ID0gbmV3IFdlYlNvY2tldChgJHt3c19zZXJ2ZXJ9P3NjZW5hcmlvX2d1aWQ9JHtndWlkfSZlbWFpbD0ke2VtYWlsfSZob3N0PSR7dXJsfSZ2YXJpYWJsZXM9JHtzdHJfdmFyaWFibGVzfSR7c3RyX3Byb2plY3R9JHtzdHJfdG9rZW59YCk7DQoNCiAgICBpZiAoIXdpbmRvdy5wcmV2aW91c1NvY2tldCB8fCAhaXNTYW1lU29ja2V0KHdpbmRvdy5wcmV2aW91c1NvY2tldCkpIHsNCiAgICAgICAgY2xlYXJDaGF0KCk7DQogICAgfQ0KDQogICAgd2luZG93LmNoYXRfc29ja2V0Lm9ub3BlbiA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgaWYgKHdpbmRvdy5yZWNvbm5lY3RUaW1lb3V0KSB7DQogICAgICAgICAgICBjbGVhckludGVydmFsKHdpbmRvdy5yZWNvbm5lY3RUaW1lb3V0KTsNCiAgICAgICAgICAgIHdpbmRvdy5yZWNvbm5lY3RUaW1lb3V0ID0gbnVsbDsNCiAgICAgICAgfQ0KICAgICAgICBpZiAod2luZG93LnBpbmdUaW1lcikgew0KICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh3aW5kb3cucGluZ1RpbWVyKTsNCiAgICAgICAgfQ0KICAgICAgICB3aW5kb3cucGluZ1RpbWVyID0gc3RhcnRQaW5nUG9uZygpOw0KICAgIH07DQoNCiAgICB3aW5kb3cuY2hhdF9zb2NrZXQub25tZXNzYWdlID0gZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICAgIGxldCBkYXRhID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTsNCg0KICAgICAgICBpZiAoaXNDaGF0UmVjb25uZWN0aW5nICYmIGlzU2FtZVNvY2tldChwcmV2aW91c1NvY2tldCkpIHsNCiAgICAgICAgICAgIGlmIChkYXRhWzBdID09PSAiZW5kX2hpc3RvcnkiICYmIGRhdGFbMV0gPT09IC0xKXsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjb18ke3dpbmRvdy5jaGF0SWR9YCkuY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTsNCg0KICAgICAgICAgICAgICAgIGlzQ2hhdFJlY29ubmVjdGluZyA9IGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGRhdGFbMF0gIT09ICdwb25nJyAmJiBkYXRhWzFdICE9PSAyKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGRhdGFbMF0gPT0gImRpc2N1c3Npb25fZ3VpZCIpIHsNCiAgICAgICAgICAgIGxldCBkaXNjdXNzaW9uX2d1aWQgPSBkYXRhWzFdOw0KDQogICAgICAgICAgICBpZiAocHJvY2Vzc0Rpc2N1c3Npb24gJiYgdHlwZW9mIHByb2Nlc3NEaXNjdXNzaW9uID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgICAgICAgcHJvY2Vzc0Rpc2N1c3Npb24oZGlzY3Vzc2lvbl9ndWlkKTsNCiAgICAgICAgICAgIH07DQogICAgICAgIH0NCiAgICAgICAgaWYgKGRhdGFbMF0gPT0gInJlc3RhcnQiKSB7DQogICAgICAgICAgICBpc0NoYXRSZXN0YXJ0aW5nID0gdHJ1ZTsNCiAgICAgICAgICAgIHN0YXJ0KC4uLk9iamVjdC52YWx1ZXMod2luZG93LmN1cnJlbnRTb2NrZXQpKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmIChkYXRhLmxlbmd0aCA+IDIpIHsNCiAgICAgICAgICAgIGlmIChkYXRhWzBdICE9ICJkaXNwbGF5IiAmJiBkYXRhWzBdICE9ICJ2YXBwIikgew0KICAgICAgICAgICAgICAgIHdpbmRvdy50cmlnZ2VyTXNnID0gZGF0YVswXTsNCiAgICAgICAgICAgICAgICBzd2l0Y2ggKHdpbmRvdy50cmlnZ2VyTXNnKSB7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgInByb21wdCI6DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VuZGluZ19tZXNzYWdlIGlucHV0I21lc3NhZ2UnKS5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlbmRpbmdfbWVzc2FnZSAuc2VuZF9idG4nKS5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNlbmRpbmdfbWVzc2FnZV9ob2xkZXIiKS5jbGFzc0xpc3QucmVtb3ZlKCJoaWRlIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXNrX2J1dHRvbi5yZXN0YXJ0JykuY2xhc3NMaXN0LmFkZCgiaGlkZSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2hhdGJveC5pbm5lckhUTUwgKz0gIjxkaXYgY2xhc3M9J21lc3NhZ2UgYWdlbnQnPiIgKyBkYXRhWzFdLnJlcGxhY2UoL1xuL2csICI8YnIvPiIpICsgIjwvZGl2PiI7DQogICAgICAgICAgICAgICAgICAgICAgICB0eXBpbmdfbWVzc2FnZS5jbGFzc0xpc3QuYWRkKCJoaWRlIik7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCg0KICAgICAgICAgICAgICAgICAgICBjYXNlICJhbGVydCI6DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgib2tfYnRuIikuY2xhc3NMaXN0LnJlbW92ZSgiaGlkZSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNlbmRpbmdfbWVzc2FnZV9ob2xkZXIiKS5jbGFzc0xpc3QuYWRkKCJoaWRlIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXNrX2J1dHRvbi5yZXN0YXJ0JykuY2xhc3NMaXN0LnJlbW92ZSgiaGlkZSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2hhdGJveC5pbm5lckhUTUwgKz0gIjxkaXYgY2xhc3M9J21lc3NhZ2UgYWdlbnQnPiIgKyBkYXRhWzFdLnJlcGxhY2UoL1xuL2csICI8YnIvPiIpICsgIjwvZGl2PiI7DQogICAgICAgICAgICAgICAgICAgICAgICB0eXBpbmdfbWVzc2FnZS5jbGFzc0xpc3QuYWRkKCJoaWRlIik7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCg0KICAgICAgICAgICAgICAgICAgICBjYXNlICJhbGVydFlOIjoNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ5ZXNfYnRuIikuY2xhc3NMaXN0LnJlbW92ZSgiaGlkZSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm5vX2J0biIpLmNsYXNzTGlzdC5yZW1vdmUoImhpZGUiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzZW5kaW5nX21lc3NhZ2VfaG9sZGVyIikuY2xhc3NMaXN0LmFkZCgiaGlkZSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFza19idXR0b24ucmVzdGFydCcpLmNsYXNzTGlzdC5yZW1vdmUoImhpZGUiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXRib3guaW5uZXJIVE1MICs9ICI8ZGl2IGNsYXNzPSdtZXNzYWdlIGFnZW50Jz4iICsgZGF0YVsxXS5yZXBsYWNlKC9cbi9nLCAiPGJyLz4iKSArICI8L2Rpdj4iOw0KICAgICAgICAgICAgICAgICAgICAgICAgdHlwaW5nX21lc3NhZ2UuY2xhc3NMaXN0LmFkZCgiaGlkZSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQoNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAiYWxlcnRPQyI6DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgib2tfYnRuIikuY2xhc3NMaXN0LnJlbW92ZSgiaGlkZSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNhbmNlbF9idG4iKS5jbGFzc0xpc3QucmVtb3ZlKCJoaWRlIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic2VuZGluZ19tZXNzYWdlX2hvbGRlciIpLmNsYXNzTGlzdC5hZGQoImhpZGUiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hc2tfYnV0dG9uLnJlc3RhcnQnKS5jbGFzc0xpc3QucmVtb3ZlKCJoaWRlIik7DQogICAgICAgICAgICAgICAgICAgICAgICBjaGF0Ym94LmlubmVySFRNTCArPSAiPGRpdiBjbGFzcz0nbWVzc2FnZSBhZ2VudCc+IiArIGRhdGFbMV0ucmVwbGFjZSgvXG4vZywgIjxici8+IikgKyAiPC9kaXY+IjsNCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGluZ19tZXNzYWdlLmNsYXNzTGlzdC5hZGQoImhpZGUiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KDQogICAgICAgICAgICAgICAgICAgIGNhc2UgImRpYWxvZyI6DQogICAgICAgICAgICAgICAgICAgIGNhc2UgImNhbmNlbGFibGVEaWFsb2ciOg0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJmb3JtIik7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZm9ybV9oZWFkZXJfd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm9ybV9oZWFkZXJfd3JhcHBlci5jbGFzc05hbWUgPSAiZm9ybV9ncm91cCI7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgaDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJoMSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaDEudGV4dENvbnRlbnQgPSBkYXRhWzFdOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBmb3JtX2hlYWRlcl93cmFwcGVyLmFwcGVuZENoaWxkKGgxKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoZm9ybV9oZWFkZXJfd3JhcHBlcik7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuc2xpY2UoMiwgLTEpLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkRGF0YSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWVsZEVsZW1lbnQgPSBjcmVhdGVGb3JtRmllbGQoZmllbGREYXRhKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGZpZWxkRWxlbWVudCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZvcm1fYnV0dG9uc19jb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1fYnV0dG9uc19jb250YWluZXIuY2xhc3NOYW1lID0gIndpbl9idXR0b25zIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdWJtaXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1pdEJ1dHRvbi50eXBlID0gInN1Ym1pdCI7DQogICAgICAgICAgICAgICAgICAgICAgICBzdWJtaXRCdXR0b24uY2xhc3NOYW1lID0gInNlbmRfZm9ybV9idG4iOw0KICAgICAgICAgICAgICAgICAgICAgICAgc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gIk9LIjsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgZm9ybV9idXR0b25zX2NvbnRhaW5lci5hcHBlbmRDaGlsZChzdWJtaXRCdXR0b24pOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LnRyaWdnZXJNc2cgPT09ICJjYW5jZWxhYmxlRGlhbG9nIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjYW5jZWxCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b24uY2xhc3NOYW1lID0gImNhbmNlbF9mb3JtX2J0biI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uLnRleHRDb250ZW50ID0gbG9jYWxpemF0aW9uW2xhbmddWyJDYW5jZWwiXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtX2J1dHRvbnNfY29udGFpbmVyLmFwcGVuZENoaWxkKGNhbmNlbEJ1dHRvbik7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwaW5nX21lc3NhZ2UuY2xhc3NMaXN0LnJlbW92ZSgiaGlkZSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LmNoYXRfc29ja2V0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXNnID0geyAibWVzc2FnZSI6IFsiRm9ybV9jYW5jZWxlZCJdLCAidHJpZ2dlciI6IHdpbmRvdy50cmlnZ2VyTXNnLCAiYnV0dG9uIjogIkNBTkNFTCIgfTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jaGF0X3NvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KG1zZykpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJoaWRlIik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1Db250YWluZXIuaW5uZXJIVE1MID0gIiI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoZm9ybV9idXR0b25zX2NvbnRhaW5lcik7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBpbmdfbWVzc2FnZS5jbGFzc0xpc3QucmVtb3ZlKCJoaWRlIik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGZvcm0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmb3JtX3ZhbHVlcyA9IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1EYXRhLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkVmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybV92YWx1ZXMucHVzaChmaWVsZFZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LmNoYXRfc29ja2V0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtc2cgPSB7ICJtZXNzYWdlIjogZm9ybV92YWx1ZXMsICJ0cmlnZ2VyIjogd2luZG93LnRyaWdnZXJNc2csICJidXR0b24iOiAiT0siIH07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jaGF0X3NvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KG1zZykpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1Db250YWluZXIuY2xhc3NMaXN0LmFkZCgiaGlkZSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1Db250YWluZXIuaW5uZXJIVE1MID0gIiI7DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNvbnRhaW5lci5hcHBlbmRDaGlsZChmb3JtKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgdHlwaW5nX21lc3NhZ2UuY2xhc3NMaXN0LmFkZCgiaGlkZSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCJoaWRlIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic2VuZGluZ19tZXNzYWdlX2hvbGRlciIpLmNsYXNzTGlzdC5hZGQoImhpZGUiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hc2tfYnV0dG9uLnJlc3RhcnQnKS5jbGFzc0xpc3QucmVtb3ZlKCJoaWRlIik7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCg0KICAgICAgICAgICAgICAgICAgICBjYXNlICJVSXF1ZXN0aW9uIjoNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkaXNjdXNzaW9uX2d1aWQgPSBkYXRhWzJdOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBjaGF0Ym94LmlubmVySFRNTCArPSAiPGRpdiBjbGFzcz0nbWVzc2FnZSBhZ2VudCc+IiArIGRhdGFbMV0ucmVwbGFjZSgvXG4vZywgIjxici8+IikgKyAiPC9kaXY+IjsNCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGluZ19tZXNzYWdlLmNsYXNzTGlzdC5hZGQoImhpZGUiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzZW5kaW5nX21lc3NhZ2VfaG9sZGVyIikuY2xhc3NMaXN0LmFkZCgiaGlkZSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFza19idXR0b24ucmVzdGFydCcpLmNsYXNzTGlzdC5yZW1vdmUoImhpZGUiKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgZXhlY0V2ZW50QmluZGVkKHdpbmRvdy5jaGF0SWQsICJjdXN0b20iLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogd2luZG93LnRyaWdnZXJNc2csDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzY3Vzc2lvbl9ndWlkOiBkaXNjdXNzaW9uX2d1aWQNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQoNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAic2hvd3VybCI6DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdXJsID0gZGF0YVsxXTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVybC5zdGFydHNXaXRoKCJodHRwOi8vIikgfHwgdXJsLnN0YXJ0c1dpdGgoImh0dHBzOi8vIikgfHwgdXJsLnN0YXJ0c1dpdGgoIi8iKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZnJhbWUuc3JjID0gdXJsOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmcmFtZS5zdHlsZS53aWR0aCA9ICcxMDAlJzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZnJhbWUuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmcmFtZUNvbnRhaW5lci5hcHBlbmRDaGlsZChpZnJhbWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmcmFtZUNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGluZ19tZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdva19idG4nKS5jbGFzc0xpc3QucmVtb3ZlKCJoaWRlIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VuZGluZ19tZXNzYWdlX2hvbGRlcicpLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hc2tfYnV0dG9uLnJlc3RhcnQnKS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCg0KICAgICAgICAgICAgICAgICAgICBjYXNlICJmb3JtRGlhbG9nIjoNCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGluZ19tZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZW5kaW5nX21lc3NhZ2VfaG9sZGVyJykuY2xhc3NMaXN0LmFkZCgnaGlkZScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFza19idXR0b24ucmVzdGFydCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHhtbFN0cmluZyA9IGRhdGFbMV07DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdXJ2ZXlDb250YWluZXIgPSBjaGF0LnF1ZXJ5U2VsZWN0b3IoJyNmb3JtX2NvbnRhaW5lcicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgc3VydmV5Q29udGFpbmVyLmlubmVySFRNTCA9ICcnOw0KICAgICAgICAgICAgICAgICAgICAgICAgc3VydmV5Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1cnZleUZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBzdXJ2ZXlGb3JtLnNldEF0dHJpYnV0ZSgnbWV0aG9kJywgJ2V2ZW50Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBzdXJ2ZXlGb3JtLnNldEF0dHJpYnV0ZSgnbmFtZScsICdmb3JtX3dyYXBwZXInKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN1cnZleUZvcm0uY2xhc3NMaXN0LmFkZCgnZm9ybV93cmFwcGVyJyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdXJ2ZXlDb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBzdXJ2ZXlDb250ZW50LmNsYXNzTGlzdC5hZGQoJ3N1cnZleV9jb250YWluZXInKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgc3VydmV5Rm9ybS5hcHBlbmRDaGlsZChzdXJ2ZXlDb250ZW50KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN1cnZleUNvbnRhaW5lci5hcHBlbmRDaGlsZChzdXJ2ZXlGb3JtKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgY2hhdC5hcHBlbmRDaGlsZChzdXJ2ZXlDb250YWluZXIpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB4bWxEb2N1bWVudCA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoeG1sU3RyaW5nLCAidGV4dC94bWwiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlckVycm9yID0geG1sRG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3BhcnNlZXJyb3InKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZXJFcnJvci5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gcGFyc2VyRXJyb3JbMF0udGV4dENvbnRlbnQudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoImZvcm1EaWFsb2c6IGVycm9yIHBhcnNpbmcgWE1MOiAiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciBkZXRhaWxzOiAiLCBlcnJvclRleHQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZm9ybXN1cnZleSA9IG5ldyBGb3JtRW5naW5lKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtRWxlbWVudDogc3VydmV5Q29udGVudCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4bWxEYXRhOiB4bWxEb2N1bWVudCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYW5nOiAnUlUnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1cnZleVRpdGxlOiAnTUFSQ0lBTCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEb2xsYXJGb3JtYXQ6IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlU3VydmV5Q29tcGxldGUoZXZlbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdXJ2ZXlSZXN1bHQgPSBldmVudC5kZXRhaWw7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5jaGF0X3NvY2tldCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29tcGxldGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGVCdXR0b24udGV4dENvbnRlbnQgPSAnQ29tcGxldGUnOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZUJ1dHRvbi5jbGFzc05hbWUgPSAnYWNjZXNzLWJ0bicNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGVCdXR0b24udHlwZSA9ICdidXR0b24nOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHN1cnZleUNvbXBsZXRlQ2xpY2soKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXNnID0geyAibWVzc2FnZSI6IHN1cnZleVJlc3VsdCwgInRyaWdnZXIiOiB3aW5kb3cudHJpZ2dlck1zZyB9Ow0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2hhdF9zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXQucXVlcnlTZWxlY3RvcignI2Zvcm1fY29udGFpbmVyJykucmVtb3ZlQ2hpbGQoc3VydmV5Rm9ybSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGF0LnF1ZXJ5U2VsZWN0b3IoJyNmb3JtX2NvbnRhaW5lcicpLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZW5kaW5nX21lc3NhZ2VfaG9sZGVyJykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFza19idXR0b24ucmVzdGFydCcpLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VydmV5Q29tcGxldGUnLCBoYW5kbGVTdXJ2ZXlDb21wbGV0ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN1cnZleUNvbXBsZXRlQ2xpY2spOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdXJ2ZXlDb250ZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGNvbXBsZXRlQnV0dG9uLCBzdXJ2ZXlDb250ZW50Lm5leHRTaWJsaW5nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1cnZleUNvbXBsZXRlJywgaGFuZGxlU3VydmV5Q29tcGxldGUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQoNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAidXBsb2FkIjoNCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGluZ19tZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXRib3guaW5uZXJIVE1MICs9ICI8ZGl2IGNsYXNzPSdtZXNzYWdlIGFnZW50Jz4iICsgZGF0YVsxXS5yZXBsYWNlKC9cbi9nLCAiPGJyLz4iKSArICI8L2Rpdj4iOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc01vYmlsZSA9IC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpYWxvZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpYWxvZycpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nLmlkID0gJ3VwbG9hZF9kaWFsb2cnOw0KICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nLmNsYXNzTmFtZSA9ICd1cGxvYWQtZGlhbG9nJzsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTW9iaWxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nLmNsYXNzTGlzdC5hZGQoJ21vYmlsZScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZy5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Zm9ybSBjbGFzcz0idXBsb2FkLXdyYXBwZXIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InVwbG9hZC1oZWFkZXIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9InVwbG9hZC10aXRsZSI+JHt0cmFuc2xhdGVXb3JkKCJVcGxvYWQgaW1hZ2UiLCBsYW5nKX08L2gzPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz0idXBsb2FkLWNsb3NlIj7inJY8L2E+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJpbnB1dC1maWxlIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGFjY2VwdD0iaW1hZ2UvKiIgaWQ9ImZpbGVJbnB1dCIgbmFtZT0iZmlsZSI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7dHJhbnNsYXRlV29yZCgiU2VsZWN0IHBob3RvIiwgbGFuZyl9PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGA7DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZy5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Zm9ybSBjbGFzcz0idXBsb2FkLXdyYXBwZXIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InVwbG9hZC1oZWFkZXIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9InVwbG9hZC10aXRsZSI+JHt0cmFuc2xhdGVXb3JkKCJVcGxvYWQgaW1hZ2UiLCBsYW5nKX08L2gzPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz0idXBsb2FkLWNsb3NlIj7inJY8L2E+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0iZHJvcHpvbmUiIGNsYXNzPSJ1cGxvYWQtZHJvcHpvbmUiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkcm9wLWxhYmVsIj4ke3RyYW5zbGF0ZVdvcmQoIkRyYWcgYSBwaG90byBoZXJlPGJyLz5PciIsIGxhbmcpfTxici8+PC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iaW5wdXQtZmlsZSI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZmlsZSIgYWNjZXB0PSJpbWFnZS8qIiBpZD0iZmlsZUlucHV0IiBuYW1lPSJmaWxlIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7dHJhbnNsYXRlV29yZCgiU2VsZWN0IHBob3RvIiwgbGFuZyl9PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9mb3JtPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZHJvcHpvbmUgPSBkaWFsb2cucXVlcnlTZWxlY3RvcignI2Ryb3B6b25lJyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcm9wem9uZS5hZGRFdmVudExpc3RlbmVyKCJkcmFnb3ZlciIsIGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcm9wem9uZS5jbGFzc0xpc3QuYWRkKCJob3ZlciIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJvcHpvbmUuYWRkRXZlbnRMaXN0ZW5lcigiZHJhZ2xlYXZlIiwgZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyb3B6b25lLmNsYXNzTGlzdC5yZW1vdmUoImhvdmVyIik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcm9wem9uZS5hZGRFdmVudExpc3RlbmVyKCJkcm9wIiwgZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyb3B6b25lLmNsYXNzTGlzdC5yZW1vdmUoImhvdmVyIik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5kYXRhVHJhbnNmZXIuZmlsZXMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRmlsZXMoZXZlbnQuZGF0YVRyYW5zZmVyLmZpbGVzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVJbnB1dCA9IGRpYWxvZy5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPSJmaWxlJyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVGaWxlcyhmaWxlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlRmlsZXMoZmlsZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1heFNpemUgPSA2MCAqIDEwMjQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGltYWdlU2l6ZSA9IGZpbGVbMF0uc2l6ZTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbWFnZVNpemUgPiBtYXhTaXplKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1hZ2UgPSBuZXcgSW1hZ2UoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYmFzZTY0RGF0YTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgd2lkdGggPSBpbWFnZS53aWR0aDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0Ow0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3JlYXRlQ29tcHJlc3NlZEltYWdlID0gKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVkdWN0aW9uRmFjdG9yID0gMC45Ow0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoID0gTWF0aC5yb3VuZCh3aWR0aCAqIHJlZHVjdGlvbkZhY3Rvcik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IE1hdGgucm91bmQoaGVpZ2h0ICogcmVkdWN0aW9uRmFjdG9yKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMud2lkdGggPSB3aWR0aDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmltYWdlU21vb3RoaW5nUXVhbGl0eSA9ICdtZWRpdW0nOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltYWdlLCAwLCAwLCB3aWR0aCwgaGVpZ2h0KTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlNjREYXRhID0gY2FudmFzLnRvRGF0YVVSTCgiaW1hZ2UvanBlZyIsIDAuOCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlU2l6ZSA9IGJhc2U2NERhdGEubGVuZ3RoOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVDb21wcmVzc2VkSW1hZ2UoKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChpbWFnZVNpemUgPiBtYXhTaXplKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUNvbXByZXNzZWRJbWFnZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuY2hhdF9zb2NrZXQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1zZyA9IHsgIm1lc3NhZ2UiOiBiYXNlNjREYXRhLCAidHJpZ2dlciI6IHdpbmRvdy50cmlnZ2VyTXNnIH07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jaGF0X3NvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KG1zZykpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGluZ19tZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nLmNsb3NlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nLnJlbW92ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJNZXNzYWdlV3JhcHBlci5yZW1vdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2dTdHlsZXMucmVtb3ZlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZS5zcmMgPSBlLnRhcmdldC5yZXN1bHQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZVswXSk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NERhdGEgPSBlLnRhcmdldC5yZXN1bHQ7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuY2hhdF9zb2NrZXQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXNnID0geyAibWVzc2FnZSI6IGJhc2U2NERhdGEsICJ0cmlnZ2VyIjogd2luZG93LnRyaWdnZXJNc2cgfTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2hhdF9zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGluZ19tZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZy5jbG9zZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nLnJlbW92ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlck1lc3NhZ2VXcmFwcGVyLnJlbW92ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nU3R5bGVzLnJlbW92ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGVbMF0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy51cGxvYWQtY2xvc2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGRpYWxvZy5jbG9zZSgpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXRib3guYXBwZW5kQ2hpbGQoZGlhbG9nKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJ0bk9wZW5EaWFsb2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bk9wZW5EaWFsb2cuY2xhc3NMaXN0LmFkZCgnc2hvdy11cGxvYWQtYnRuJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBidG5PcGVuRGlhbG9nLnRleHRDb250ZW50ID0gJ1VwbG9hZCBpbWFnZSc7DQogICAgICAgICAgICAgICAgICAgICAgICBidG5PcGVuRGlhbG9nLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gZGlhbG9nLnNob3dNb2RhbCgpKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHVzZXJNZXNzYWdlV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdXNlck1lc3NhZ2VXcmFwcGVyLmNsYXNzTmFtZSA9ICJtZXNzYWdlIHVzZXIiOw0KICAgICAgICAgICAgICAgICAgICAgICAgdXNlck1lc3NhZ2VXcmFwcGVyLmFwcGVuZENoaWxkKGJ0bk9wZW5EaWFsb2cpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2hhdGJveC5hcHBlbmRDaGlsZCh1c2VyTWVzc2FnZVdyYXBwZXIpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaWFsb2dTdHlsZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nU3R5bGVzLmlubmVySFRNTCA9IGANCiAgICAgICAgICAgICAgICAgICAgICAgIC52ZG9tX2NoYXQgew0KICAgICAgICAgICAgICAgICAgICAgICAgLnVwbG9hZC1kaWFsb2cgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAzMDBweDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAyMDBweDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggNnB4IHJnYmEoMCwgMCwgMCwgMC4xKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgei1pbmRleDogMTAwMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMCAzMHB4IDIwcHg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGNvbnRlbnQtYm94Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IGF1dG87DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYubW9iaWxlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDI1MHB4Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDE1MHB4Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICY6Zm9jdXMgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRsaW5lOiBub25lOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC51cGxvYWQtd3JhcHBlciB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudXBsb2FkLWhlYWRlciB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMjBweDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudXBsb2FkLXRpdGxlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDE2cHg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMTVweCAwcHg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnVwbG9hZC1jbG9zZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDBweDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiA4cHg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudXBsb2FkLWRyb3B6b25lIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBkYXNoZWQgI2NjYzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAyMHB4Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMjBweDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogY2FsYygxMDAlIC0gMTAwcHgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGNvbnRlbnQtYm94Ow0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmRyb3AtbGFiZWwgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDE1cHg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjYTVhNWE1Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmlucHV0LWZpbGUsIC5zaG93LXVwbG9hZC1idG4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMwOEU1ODg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTBweDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxOHB4IDI4cHg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBhdXRvOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmOmhvdmVyIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDhFNTg4Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRbdHlwZT0iZmlsZSJdIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDBweDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAwcHg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2hvdy11cGxvYWQtYnRuIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxNHB4IDI4cHg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9YDsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgY2hhdGJveC5hcHBlbmRDaGlsZChkaWFsb2dTdHlsZXMpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCg0KICAgICAgICAgICAgICAgICAgICBjYXNlICJxdWVzdGlvbiI6DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VuZGluZ19tZXNzYWdlIGlucHV0I21lc3NhZ2UnKS5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VuZGluZ19tZXNzYWdlIC5zZW5kX2J0bicpLmRpc2FibGVkID0gdHJ1ZTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNlbmRpbmdfbWVzc2FnZV9ob2xkZXIiKS5jbGFzc0xpc3QuYWRkKCJoaWRlIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXNrX2J1dHRvbi5yZXN0YXJ0JykuY2xhc3NMaXN0LnJlbW92ZSgiaGlkZSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICB0eXBpbmdfbWVzc2FnZS5jbGFzc0xpc3QuYWRkKCJoaWRlIik7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZm9ybV9tc2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJmb3JtIik7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZm9ybV9tc2dfaGVhZGVyX3dyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1fbXNnX2hlYWRlcl93cmFwcGVyLmNsYXNzTmFtZSA9ICJmb3JtX2dyb3VwIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBoMV9tc2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJoMyIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaDFfbXNnLnRleHRDb250ZW50ID0gZGF0YVsxXTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgZm9ybV9tc2dfaGVhZGVyX3dyYXBwZXIuYXBwZW5kQ2hpbGQoaDFfbXNnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1fbXNnLmFwcGVuZENoaWxkKGZvcm1fbXNnX2hlYWRlcl93cmFwcGVyKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5zbGljZSgyLCAtMSkuZm9yRWFjaChmdW5jdGlvbiAoZmllbGREYXRhKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpZWxkRWxlbWVudCA9IGNyZWF0ZUZvcm1GaWVsZChmaWVsZERhdGEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1fbXNnLmFwcGVuZENoaWxkKGZpZWxkRWxlbWVudCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9rU3VibWl0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7DQogICAgICAgICAgICAgICAgICAgICAgICBva1N1Ym1pdEJ1dHRvbi50eXBlID0gImJ1dHRvbiI7DQogICAgICAgICAgICAgICAgICAgICAgICBva1N1Ym1pdEJ1dHRvbi5jbGFzc05hbWUgPSAiYXNrX2J1dHRvbiBvayBzZW5kX2Zvcm1fYnRuIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIG9rU3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gIk9LIjsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgb2tTdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGZvcm1fbXNnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZm9ybV92YWx1ZXMgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZFZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1fdmFsdWVzLnB1c2goZmllbGRWYWx1ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LmNoYXRfc29ja2V0ICYmIGZvcm1fdmFsdWVzLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXNnID0geyAibWVzc2FnZSI6IGZvcm1fdmFsdWVzLCAidHJpZ2dlciI6IHdpbmRvdy50cmlnZ2VyTXNnLCAiYnV0dG9uIjogIk9LIiB9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2hhdF9zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva1N1Ym1pdEJ1dHRvbi5yZW1vdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcHBlcl9tc2cucmVtb3ZlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgY2hhdC5xdWVyeVNlbGVjdG9yKCcuYXNrX2J1dHRvbnMnKS5wcmVwZW5kKG9rU3VibWl0QnV0dG9uKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd3JhcHBlcl9tc2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXJfbXNnLmNsYXNzTmFtZSA9ICdtZXNzYWdlIGFnZW50JzsNCiAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXJfbXNnLmFwcGVuZENoaWxkKGZvcm1fbXNnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXRib3guYXBwZW5kQ2hpbGQod3JhcHBlcl9tc2cpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YVswXSA9PSAiZGlzcGxheSIpIHsNCiAgICAgICAgICAgICAgICBsZXQgVkRPTVhNTCA9IGRhdGFbMV07DQogICAgICAgICAgICAgICAgbGV0IEUyVkRPTSA9IGRhdGFbMl07DQogICAgICAgICAgICAgICAgbGV0IGRpc2N1c3Npb25fZ3VpZCA9IGRhdGFbM107DQoNCiAgICAgICAgICAgICAgICBleGVjRXZlbnRCaW5kZWQod2luZG93LmNoYXRJZCwgImN1c3RvbSIsIHsNCiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogZGF0YVswXSwNCiAgICAgICAgICAgICAgICAgICAgdmRvbXhtbDogVkRPTVhNTCwNCiAgICAgICAgICAgICAgICAgICAgZTJ2ZG9tOiBFMlZET00sDQogICAgICAgICAgICAgICAgICAgIGRpc2N1c3Npb25fZ3VpZDogZGlzY3Vzc2lvbl9ndWlkDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGxldCBkaXNjdXNzaW9uX2d1aWQgPSBkYXRhWzFdOw0KDQogICAgICAgICAgICAgICAgZXhlY0V2ZW50QmluZGVkKHdpbmRvdy5jaGF0SWQsICJjdXN0b20iLCB7DQogICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6IGRhdGFbMF0sDQogICAgICAgICAgICAgICAgICAgIGRpc2N1c3Npb25fZ3VpZDogZGlzY3Vzc2lvbl9ndWlkDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgfSBlbHNlIGlmIChkYXRhWzBdID09PSAiZXJyb3IiKSB7DQogICAgICAgICAgICBbIm9rX2J0biIsICJjYW5jZWxfYnRuIiwgInllc19idG4iLCAibm9fYnRuIiwgInR5cGluZ19tZXNzYWdlIl0NCiAgICAgICAgICAgICAgICAuZm9yRWFjaChidG5JZCA9PiB7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJ0bklkKS5jbGFzc0xpc3QuYWRkKCJoaWRlIik7DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hc2tfYnV0dG9uLnJlc3RhcnQnKS5jbGFzc0xpc3QucmVtb3ZlKCJoaWRlIik7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic2VuZGluZ19tZXNzYWdlX2hvbGRlciIpLmNsYXNzTGlzdC5hZGQoImhpZGUiKTsNCiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZW5kaW5nX21lc3NhZ2UgaW5wdXQjbWVzc2FnZScpLmRpc2FibGVkID0gdHJ1ZTsNCiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZW5kaW5nX21lc3NhZ2UgLnNlbmRfYnRuJykuZGlzYWJsZWQgPSB0cnVlOw0KDQogICAgICAgICAgICBjaGF0Ym94LmlubmVySFRNTCArPSAiPGRpdiBjbGFzcz0nbWVzc2FnZSBhZ2VudCc+IiArIGRhdGFbMV0ucmVwbGFjZSgvXG4vZywgIjxici8+IikgKyAiPC9kaXY+IjsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGlmIChkYXRhWzFdID09PSAwKSB7DQogICAgICAgICAgICAgICAgbGV0IHVzZXJfbWVzc2FnZSA9IGRhdGFbMF07DQoNCiAgICAgICAgICAgICAgICBpZiAodXNlcl9tZXNzYWdlLnN0YXJ0c1dpdGgoImRhdGE6aW1hZ2UiKSkgew0KICAgICAgICAgICAgICAgICAgICBsZXQgdXNlck1lc3NhZ2VXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQogICAgICAgICAgICAgICAgICAgIHVzZXJNZXNzYWdlV3JhcHBlci5jbGFzc05hbWUgPSAibWVzc2FnZSB1c2VyIjsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOw0KICAgICAgICAgICAgICAgICAgICBpbWcuc3JjID0gdXNlcl9tZXNzYWdlOw0KICAgICAgICAgICAgICAgICAgICBpbWcuc3R5bGUgPSAnbWF4LWhlaWdodDogMTUwcHg7IG1pbi1oZWlnaHQ6IDUwcHg7Jw0KICAgICAgICAgICAgICAgICAgICB1c2VyTWVzc2FnZVdyYXBwZXIuYXBwZW5kQ2hpbGQoaW1nKTsNCiAgICAgICAgICAgICAgICAgICAgY2hhdGJveC5hcHBlbmRDaGlsZCh1c2VyTWVzc2FnZVdyYXBwZXIpOw0KDQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdXNlcl9tZXNzYWdlID0gdXNlcl9tZXNzYWdlLnJlcGxhY2UoL1xuL2csICI8YnIvPiIpOw0KICAgICAgICAgICAgICAgICAgICB1c2VyX21lc3NhZ2UgPSB0cmFuc2xhdGVXb3JkKHVzZXJfbWVzc2FnZSwgbGFuZyk7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJfbWVzc2FnZVswXSA9PT0gIlsiIHx8IHVzZXJfbWVzc2FnZVswXSA9PT0gInsiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdXNlck1lc3NhZ2VXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQogICAgICAgICAgICAgICAgICAgICAgICB1c2VyTWVzc2FnZVdyYXBwZXIuY2xhc3NOYW1lID0gIm1lc3NhZ2UgdXNlciI7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3BvaWxlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgc3BvaWxlci5jbGFzc05hbWUgPSAic3BvaWxlciI7DQogICAgICAgICAgICAgICAgICAgICAgICBzcG9pbGVyLnRleHRDb250ZW50ID0gdHJhbnNsYXRlV29yZCgiRm9ybSBkYXRhIHRyYW5zbWl0dGVkIiwgbGFuZykgKyAiICgrKSI7DQogICAgICAgICAgICAgICAgICAgICAgICBzcG9pbGVyLnNldEF0dHJpYnV0ZSgib25jbGljayIsICJ0b2dnbGVTcG9pbGVyKHRoaXMpIik7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdXNlck1lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJNZXNzYWdlLmNsYXNzTmFtZSA9ICJtZXNzYWdlX3RleHQgaGlkZSI7DQogICAgICAgICAgICAgICAgICAgICAgICB1c2VyTWVzc2FnZS50ZXh0Q29udGVudCA9IHVzZXJfbWVzc2FnZTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgdXNlck1lc3NhZ2VXcmFwcGVyLmFwcGVuZENoaWxkKHNwb2lsZXIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdXNlck1lc3NhZ2VXcmFwcGVyLmFwcGVuZENoaWxkKHVzZXJNZXNzYWdlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXRib3guYXBwZW5kQ2hpbGQodXNlck1lc3NhZ2VXcmFwcGVyKTsNCg0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgY2hhdGJveC5pbm5lckhUTUwgKz0gIjxkaXYgY2xhc3M9J21lc3NhZ2UgdXNlcic+IiArIHVzZXJfbWVzc2FnZSArICI8L2Rpdj4iOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgdHlwaW5nX21lc3NhZ2UuY2xhc3NMaXN0LnJlbW92ZSgiaGlkZSIpOw0KDQogICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGFbMF0gPT09ICdwb25nJyAmJiBkYXRhWzFdID09PSAyKSB7DQogICAgICAgICAgICAgICAgd2luZG93LnBvbmdSZWNlaXZlZCA9IHRydWU7DQoNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YVsxXSA9PT0gMSkgew0KICAgICAgICAgICAgICAgIGNoYXRib3guaW5uZXJIVE1MICs9ICI8ZGl2IGNsYXNzPSdtZXNzYWdlIGFnZW50Jz4iICsgZGF0YVswXS5yZXBsYWNlKC9cbi9nLCAiPGJyLz4iKSArICI8L2Rpdj4iOw0KICAgICAgICAgICAgICAgIHR5cGluZ19tZXNzYWdlLmNsYXNzTGlzdC5hZGQoImhpZGUiKTsNCg0KICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhWzFdID09PSAtMSAmJiBkYXRhWzBdICE9PSAiZW5kX2hpc3RvcnkiKSB7DQogICAgICAgICAgICAgICAgdHlwaW5nX21lc3NhZ2UuY2xhc3NMaXN0LmFkZCgiaGlkZSIpOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hc2tfYnV0dG9uLnJlc3RhcnQnKS5jbGFzc0xpc3QuYWRkKCJoaWRlIik7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNlbmRpbmdfbWVzc2FnZV9ob2xkZXIiKS5jbGFzc0xpc3QucmVtb3ZlKCJoaWRlIik7DQogICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlbmRpbmdfbWVzc2FnZSBpbnB1dCNtZXNzYWdlJyk7DQogICAgICAgICAgICAgICAgY29uc3Qgc2VuZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZW5kaW5nX21lc3NhZ2UgLnNlbmRfYnRuJyk7DQoNCiAgICAgICAgICAgICAgICBtZXNzYWdlSW5wdXQuZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgIHNlbmRCdXR0b24uZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KDQogICAgICAgIGNoYXRib3guc2Nyb2xsVG9wID0gY2hhdGJveC5zY3JvbGxIZWlnaHQ7DQogICAgfTsNCg0KICAgIHdpbmRvdy5jaGF0X3NvY2tldC5vbmNsb3NlID0gZnVuY3Rpb24gKGV2ZW50KSB7DQoNCiAgICAgICAgaWYgKGV2ZW50LmNvZGUgIT09IDEwMDApIHsNCiAgICAgICAgICAgIGlmICghd2luZG93LnJlY29ubmVjdFRpbWVvdXQpIHsNCiAgICAgICAgICAgICAgICB3aW5kb3cucmVjb25uZWN0VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBzdGFydCguLi5PYmplY3QudmFsdWVzKHdpbmRvdy5jdXJyZW50U29ja2V0KSk7DQogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZWNvbm5lY3RUaW1lb3V0ID0gbnVsbDsNCiAgICAgICAgICAgICAgICB9LCA1MDAwKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH07DQoNCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWVzc2FnZSIpLmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLCBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gIkVudGVyIiAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWVzc2FnZSIpLnZhbHVlICE9PSAiIikgew0KICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICAgIHNlbmRNZXNzYWdlKCk7DQogICAgICAgIH0NCiAgICB9KTsNCg0KICAgIGZ1bmN0aW9uIHN0YXJ0UGluZ1BvbmcoKSB7DQogICAgICAgIGNvbnN0IHBpbmdJbnRlcnZhbCA9IDEwMDAwOw0KICAgICAgICBjb25zdCBwaW5nTWVzc2FnZSA9IEpTT04uc3RyaW5naWZ5KHsgInRyaWdnZXIiOiAncGluZycgfSk7DQoNCiAgICAgICAgY29uc3QgcGluZ1RpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4gew0KICAgICAgICAgICAgaWYgKHdpbmRvdy5jaGF0X3NvY2tldC5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTikgew0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHdpbmRvdy5jaGF0X3NvY2tldC5zZW5kKHBpbmdNZXNzYWdlKTsNCg0KICAgICAgICAgICAgICAgIHdpbmRvdy5wb25nUmVjZWl2ZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCF3aW5kb3cucG9uZ1JlY2VpdmVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpc0NoYXRSZWNvbm5lY3RpbmcgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI29fJHt3aW5kb3cuY2hhdElkfWApLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jaGF0X3NvY2tldC5jbG9zZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQoLi4uT2JqZWN0LnZhbHVlcyh3aW5kb3cuY3VycmVudFNvY2tldCkpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwgNTAwMCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sIHBpbmdJbnRlcnZhbCk7DQoNCiAgICAgICAgcmV0dXJuIHBpbmdUaW1lcjsNCiAgICB9DQp9DQoNCmZ1bmN0aW9uIHNlbmRNZXNzYWdlKCkgew0KICAgIGNvbnN0IG1lc3NhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWVzc2FnZSIpLnZhbHVlOw0KDQogICAgaWYgKHdpbmRvdy5jaGF0X3NvY2tldCAmJiBtZXNzYWdlKSB7DQogICAgICAgIGxldCBtc2cgPSB7ICJtZXNzYWdlIjogbWVzc2FnZSwgInRyaWdnZXIiOiB3aW5kb3cudHJpZ2dlck1zZyB9Ow0KICAgICAgICB3aW5kb3cuY2hhdF9zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKTsNCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1lc3NhZ2UiKS52YWx1ZSA9ICIiOw0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidHlwaW5nX21lc3NhZ2UiKS5jbGFzc0xpc3QucmVtb3ZlKCJoaWRlIik7DQogICAgfQ0KfQ0KDQpmdW5jdGlvbiBjbGlja09LQnV0dG9uKCkgew0KICAgIGlmICh3aW5kb3cuY2hhdF9zb2NrZXQpIHsNCiAgICAgICAgbGV0IG1zZyA9IHsgIm1lc3NhZ2UiOiAiT0siLCAidHJpZ2dlciI6IHdpbmRvdy50cmlnZ2VyTXNnIH07DQogICAgICAgIHdpbmRvdy5jaGF0X3NvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KG1zZykpOw0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgib2tfYnRuIikuY2xhc3NMaXN0LmFkZCgiaGlkZSIpOw0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2FuY2VsX2J0biIpLmNsYXNzTGlzdC5hZGQoImhpZGUiKTsNCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInR5cGluZ19tZXNzYWdlIikuY2xhc3NMaXN0LnJlbW92ZSgiaGlkZSIpOw0KICAgICAgICBjb25zdCBpZnJhbWVDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaWZyYW1lX2NvbnRhaW5lciIpOw0KICAgICAgICBpZnJhbWVDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnaGlkZScpOw0KICAgICAgICBpZnJhbWVDb250YWluZXIuaW5uZXJIVE1MID0gIiINCiAgICB9DQp9DQoNCmZ1bmN0aW9uIGNsaWNrQ2FuY2VsQnV0dG9uKCkgew0KICAgIGlmICh3aW5kb3cuY2hhdF9zb2NrZXQpIHsNCiAgICAgICAgbGV0IG1zZyA9IHsgIm1lc3NhZ2UiOiAiQ0FOQ0VMIiwgInRyaWdnZXIiOiB3aW5kb3cudHJpZ2dlck1zZyB9Ow0KICAgICAgICB3aW5kb3cuY2hhdF9zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKTsNCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNhbmNlbF9idG4iKS5jbGFzc0xpc3QuYWRkKCJoaWRlIik7DQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJva19idG4iKS5jbGFzc0xpc3QuYWRkKCJoaWRlIik7DQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0eXBpbmdfbWVzc2FnZSIpLmNsYXNzTGlzdC5yZW1vdmUoImhpZGUiKTsNCiAgICB9DQp9DQoNCmZ1bmN0aW9uIGNsaWNrWWVzQnV0dG9uKCkgew0KICAgIGlmICh3aW5kb3cuY2hhdF9zb2NrZXQpIHsNCiAgICAgICAgbGV0IG1zZyA9IHsgIm1lc3NhZ2UiOiAiWUVTIiwgInRyaWdnZXIiOiB3aW5kb3cudHJpZ2dlck1zZyB9Ow0KICAgICAgICB3aW5kb3cuY2hhdF9zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKTsNCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm5vX2J0biIpLmNsYXNzTGlzdC5hZGQoImhpZGUiKTsNCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInllc19idG4iKS5jbGFzc0xpc3QuYWRkKCJoaWRlIik7DQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0eXBpbmdfbWVzc2FnZSIpLmNsYXNzTGlzdC5yZW1vdmUoImhpZGUiKTsNCiAgICB9DQp9DQoNCmZ1bmN0aW9uIGNsaWNrTm9CdXR0b24oKSB7DQogICAgaWYgKHdpbmRvdy5jaGF0X3NvY2tldCkgew0KICAgICAgICBsZXQgbXNnID0geyAibWVzc2FnZSI6ICJOTyIsICJ0cmlnZ2VyIjogd2luZG93LnRyaWdnZXJNc2cgfTsNCiAgICAgICAgd2luZG93LmNoYXRfc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkobXNnKSk7DQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJub19idG4iKS5jbGFzc0xpc3QuYWRkKCJoaWRlIik7DQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ5ZXNfYnRuIikuY2xhc3NMaXN0LmFkZCgiaGlkZSIpOw0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidHlwaW5nX21lc3NhZ2UiKS5jbGFzc0xpc3QucmVtb3ZlKCJoaWRlIik7DQogICAgfQ0KfQ0KDQpmdW5jdGlvbiBzaG93UmVzdGFydERpYWxvZygpIHsNCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZGlhbG9nX3Jlc3RhcnRfY2hhdCIpLmNsYXNzTGlzdC5yZW1vdmUoImhpZGUiKTsNCn0NCg0KZnVuY3Rpb24gY2xpY2tSZXN0YXJ0QnV0dG9uKCkgew0KICAgIGlmICh3aW5kb3cuY2hhdF9zb2NrZXQpIHsNCiAgICAgICAgY2xlYXJDaGF0KCk7DQogICAgICAgIA0KICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VuZGluZ19tZXNzYWdlIGlucHV0I21lc3NhZ2UnKS5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZW5kaW5nX21lc3NhZ2UgLnNlbmRfYnRuJykuZGlzYWJsZWQgPSB0cnVlOw0KDQogICAgICAgIGxldCBtc2cgPSB7ICJtZXNzYWdlIjogInJlc3RhcnQiLCAidHJpZ2dlciI6ICJyZXN0YXJ0IiB9Ow0KICAgICAgICB3aW5kb3cuY2hhdF9zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKTsNCg0KICAgICAgICBoaWRlUmVzdGFydENoYXREaWFsb2coKTsNCiAgICB9DQp9DQoNCmZ1bmN0aW9uIGhpZGVSZXN0YXJ0Q2hhdERpYWxvZygpIHsNCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZGlhbG9nX3Jlc3RhcnRfY2hhdCIpLmNsYXNzTGlzdC5hZGQoImhpZGUiKTsNCn0NCg0KZnVuY3Rpb24gdG9nZ2xlU3BvaWxlcihzcG9pbGVyKSB7DQogICAgbGV0IG5leHRFbGVtZW50ID0gc3BvaWxlci5uZXh0RWxlbWVudFNpYmxpbmc7DQogICAgbmV4dEVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgiaGlkZSIpOw0KfQ0KDQpmdW5jdGlvbiBjcmVhdGVGb3JtRmllbGQoZmllbGREYXRhKSB7DQogICAgdmFyIGZpZWxkV3JhcHBlcjsNCiAgICB2YXIgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOw0KICAgIGxhYmVsLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAiZ3JvdXBfbGFiZWwiKTsNCiAgICBsYWJlbC50ZXh0Q29udGVudCA9IGZpZWxkRGF0YVsxXTsNCg0KICAgIGlmIChmaWVsZERhdGFbMF0gPT09ICJyYWRpb0J1dHRvbnMiKSB7DQogICAgICAgIGZpZWxkV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgICBmaWVsZFdyYXBwZXIuc2V0QXR0cmlidXRlKCJjbGFzcyIsICJmb3JtX2dyb3VwIGZvcm1fcmFkaW8iKTsNCiAgICAgICAgZmllbGRXcmFwcGVyLmFwcGVuZENoaWxkKGxhYmVsKTsNCg0KICAgICAgICBmaWVsZERhdGFbMl0uZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHsNCiAgICAgICAgICAgIHZhciByYWRpb1dyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsNCiAgICAgICAgICAgIHJhZGlvV3JhcHBlci5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgInJhZGlvYnV0dG9uIik7DQoNCiAgICAgICAgICAgIHZhciByYWRpb0lucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsNCiAgICAgICAgICAgIHJhZGlvSW5wdXQuc2V0QXR0cmlidXRlKCJ0eXBlIiwgdmFsdWUudHlwZSk7DQogICAgICAgICAgICByYWRpb0lucHV0LnNldEF0dHJpYnV0ZSgidmFsdWUiLCB2YWx1ZS52YWx1ZSk7DQogICAgICAgICAgICByYWRpb0lucHV0LnNldEF0dHJpYnV0ZSgibmFtZSIsIHZhbHVlLm5hbWUpOw0KICAgICAgICAgICAgcmFkaW9JbnB1dC5zZXRBdHRyaWJ1dGUoImlkIiwgdmFsdWUuaWQpOw0KICAgICAgICAgICAgaWYgKHZhbHVlLnNlbGVjdGVkKSB7DQogICAgICAgICAgICAgICAgcmFkaW9JbnB1dC5zZXRBdHRyaWJ1dGUoImNoZWNrZWQiLCAiY2hlY2tlZCIpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB2YXIgcmFkaW9MYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVsIik7DQogICAgICAgICAgICByYWRpb0xhYmVsLnNldEF0dHJpYnV0ZSgiZm9yIiwgdmFsdWUuaWQpOw0KICAgICAgICAgICAgcmFkaW9MYWJlbC50ZXh0Q29udGVudCA9ICIgICIgKyB2YWx1ZS5sYWJlbDsNCg0KICAgICAgICAgICAgcmFkaW9XcmFwcGVyLmFwcGVuZENoaWxkKHJhZGlvSW5wdXQpOw0KICAgICAgICAgICAgcmFkaW9XcmFwcGVyLmFwcGVuZENoaWxkKHJhZGlvTGFiZWwpOw0KICAgICAgICAgICAgZmllbGRXcmFwcGVyLmFwcGVuZENoaWxkKHJhZGlvV3JhcHBlcik7DQogICAgICAgIH0pOw0KICAgIH0gZWxzZSB7DQogICAgICAgIGZpZWxkV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgICBmaWVsZFdyYXBwZXIuc2V0QXR0cmlidXRlKCJjbGFzcyIsICJmb3JtX2dyb3VwIGZvcm1faW5wdXQiKTsNCg0KICAgICAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOw0KICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoInR5cGUiLCBmaWVsZERhdGFbMF0pOw0KICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwgZmllbGREYXRhWzJdKTsNCiAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCJuYW1lIiwgZmllbGREYXRhWzNdKTsNCg0KICAgICAgICBmaWVsZFdyYXBwZXIuYXBwZW5kQ2hpbGQobGFiZWwpOw0KICAgICAgICBmaWVsZFdyYXBwZXIuYXBwZW5kQ2hpbGQoaW5wdXQpOw0KICAgIH0NCg0KICAgIHJldHVybiBmaWVsZFdyYXBwZXI7DQp9DQoNCmZ1bmN0aW9uIGNsZWFyQ2hhdCgpIHsNCiAgICBjb25zdCBjaGF0Ym94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNoYXRib3giKTsNCiAgICBjaGF0Ym94LmlubmVySFRNTCA9ICIiOw0KICAgIGlzRmlyc3RTdGFydCA9IGZhbHNlOw0KDQogICAgbGV0IGZvcm1Db250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm9ybV9jb250YWluZXIiKTsNCiAgICBmb3JtQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoImhpZGUiKTsNCiAgICBmb3JtQ29udGFpbmVyLmlubmVySFRNTCA9ICIiOw0KDQogICAgbGV0IGlmcmFtZUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJpZnJhbWVfY29udGFpbmVyIik7DQogICAgaWZyYW1lQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoImhpZGUiKTsNCiAgICBpZnJhbWVDb250YWluZXIuaW5uZXJIVE1MID0gIiI7DQoNCg0KICAgIFsib2tfYnRuIiwgImNhbmNlbF9idG4iLCAieWVzX2J0biIsICJub19idG4iLCAidHlwaW5nX21lc3NhZ2UiXQ0KICAgICAgICAuZm9yRWFjaChidG5JZCA9PiB7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChidG5JZCkuY2xhc3NMaXN0LmFkZCgiaGlkZSIpOw0KICAgICAgICB9KTsNCg0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzZW5kaW5nX21lc3NhZ2VfaG9sZGVyIikuY2xhc3NMaXN0LnJlbW92ZSgiaGlkZSIpOw0KICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hc2tfYnV0dG9uLnJlc3RhcnQnKS5jbGFzc0xpc3QuYWRkKCJoaWRlIik7DQogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlbmRpbmdfbWVzc2FnZSBpbnB1dCNtZXNzYWdlJykuZGlzYWJsZWQgPSBmYWxzZTsNCiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VuZGluZ19tZXNzYWdlIC5zZW5kX2J0bicpLmRpc2FibGVkID0gZmFsc2U7DQoNCiAgICBsZXQgdHlwaW5nX21lc3NhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidHlwaW5nX21lc3NhZ2UiKTsNCiAgICB0eXBpbmdfbWVzc2FnZS5jbGFzc0xpc3QuYWRkKCJoaWRlIik7DQoNCiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjb18ke3dpbmRvdy5jaGF0SWR9YCkuY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTsNCn0NCg0KZnVuY3Rpb24gaXNTYW1lU29ja2V0KG9sZFNvY2tldCkgew0KICAgIHJldHVybiAoDQogICAgICAgIG9sZFNvY2tldC53c19zZXJ2ZXIgPT09IHdpbmRvdy5jdXJyZW50U29ja2V0LndzX3NlcnZlciAmJg0KICAgICAgICBvbGRTb2NrZXQuZ3VpZCA9PT0gd2luZG93LmN1cnJlbnRTb2NrZXQuZ3VpZCAmJg0KICAgICAgICBvbGRTb2NrZXQuZW1haWwgPT09IHdpbmRvdy5jdXJyZW50U29ja2V0LmVtYWlsICYmDQogICAgICAgIG9sZFNvY2tldC51cmwgPT09IHdpbmRvdy5jdXJyZW50U29ja2V0LnVybCAmJg0KICAgICAgICBvbGRTb2NrZXQudmFyaWFibGVzID09PSB3aW5kb3cuY3VycmVudFNvY2tldC52YXJpYWJsZXMgJiYNCiAgICAgICAgb2xkU29ja2V0LnByb2plY3RfZ3VpZCA9PT0gd2luZG93LmN1cnJlbnRTb2NrZXQucHJvamVjdF9ndWlkICYmDQogICAgICAgIG9sZFNvY2tldC51c2VyX2FjY2Vzc190b2tlbiA9PT0gd2luZG93LmN1cnJlbnRTb2NrZXQudXNlcl9hY2Nlc3NfdG9rZW4NCiAgICApOw0KfQ0KDQpmdW5jdGlvbiBpc0FscmVhZHlFbmNvZGVkKHN0cikgew0KICAgIHRyeSB7DQogICAgICAgIGNvbnN0IGRlY29kZWQgPSBkZWNvZGVVUklDb21wb25lbnQoc3RyKTsNCiAgICAgICAgcmV0dXJuIGRlY29kZWQgIT09IHN0cjsNCiAgICB9IGNhdGNoIChlKSB7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQp9DQoNCmZ1bmN0aW9uIGdldFByZXZpb3VzU29ja2V0T2JqKCkgew0KICAgIGlmICh3aW5kb3cuY3VycmVudFNvY2tldCAmJiB0eXBlb2Ygd2luZG93LmN1cnJlbnRTb2NrZXQgPT09ICdvYmplY3QnICYmIE9iamVjdC5rZXlzKHdpbmRvdy5jdXJyZW50U29ja2V0KS5sZW5ndGggPT09IDApIHsNCiAgICAgICAgd2luZG93LnByZXZpb3VzU29ja2V0ID0gbnVsbDsNCiAgICB9IGVsc2Ugew0KICAgICAgICB3aW5kb3cucHJldmlvdXNTb2NrZXQgPSB7IC4uLndpbmRvdy5jdXJyZW50U29ja2V0IH0NCiAgICB9DQp9DQoNCmxldCBpc0NoYXRSZWNvbm5lY3RpbmcgPSBmYWxzZTsNCmxldCBpc0NoYXRSZXN0YXJ0aW5nID0gZmFsc2U7]]></Resource>
  </Resources>
  <SourceCode><![CDATA[from scripting.legacy.id import id2link1
import json

class VDOM_chat(VDOM_object):
	
    def check_unit(self, value):
        return value + "px" if value.isdigit() else value

    def render(self, contents=""):
        display = u"none" if self.visible == "0" else self.displaying
        zindex = u"%s" % self.zindex if int(self.zindex) != 0 else u""
        position = u"%s" % self.positioning if self.positioning and self.positioning != "static" else u""
        
        styles = {
            "display": display,
            "z-index": zindex,
            "position": position,
            "width": self.check_unit(self.width),
            "height": self.check_unit(self.height),
            "margin": self.margins,
            "padding": self.paddings,
            "top": self.check_unit(self.top),
            "left": self.check_unit(self.left)
        }
        if self.positioning == "static":
        	styles["top"] = styles["left"] = ""
        
        style = " ".join(["{}: {};".format(key, value) for key, value in styles.items() if value])

        id = u"o_" + (self.id).replace('-', '_')
        css = u"<style>\n" + self.style % {"id": id} + u"</style>" if self.style else u""

        if VDOM_CONFIG_1["DEBUG"] == "1":
            debug_info = u"objtype='chat' objname='%s' ver='%s'" % (self.name, self.type.version)
        else:
            debug_info = u""
        
        variables = self.variables.strip()
        
        try:
        	variables_json = json.loads(variables)
        	variables = json.dumps(variables_json).replace('\n', '')
        except ValueError:
        	print("Invalid JSON format")
        
        if self.avatar or self.avatar_externalurl:
        	link = id2link1(self.avatar) if self.avatar else self.avatar_externalurl
        	html_ava = u"""<div class="avatar"><img class="avatar_image" src="{url}" /></div>""".format(url=link)
        else:
        	html_ava = u"""<div class="avatar"></div>"""
        
        agent_name = u"""<div class="agent_name">{name}</div>""".format(name = self.agent_name) if self.agent_name else u""
        
        result = u"""{css}
<div id="{id}" class="{classname} vdom_chat chat_holder" style="{style}" {debug_info} lang="{lang}">
	<div class="top_panel">
		{html_avatar}{agent_name}
		<div id="typing_message" class="typing_btn hide"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>
		</div>
            <div class="chat_wrapper">
                <div id="chatbox" class="chatbox"></div>
                <div id="iframe_container" class="iframe_container hide"></div>
                <div class="ask_buttons">
					<button type="button" id="ok_btn" class="ask_button ok hide" onclick="clickOKButton()">OK</button>
					<button type="button" id="cancel_btn" class="ask_button no hide" onclick="clickCancelButton()">Cancel</button>
					<button type="button" id="yes_btn" class="ask_button yes hide" onclick="clickYesButton()">YES</button>
					<button type="button" id="no_btn" class="ask_button no hide" onclick="clickNoButton()">NO</button>
					<button type="button" id="restart_btn" class="ask_button restart hide" onclick="showRestartDialog()"></button>
				</div>
            </div>
            <div id="sending_message_holder" class="sending_message_holder">
            	<form class="sending_message">
            		<input type="text" id="message" required="" autocomplete="off" placeholder="Type something...">
            		<button type="button" id="restart_btn" class="restart_btn" onclick="showRestartDialog()"></button>
            		<button type="button" class="send_btn" onclick="sendMessage()"></button>
            	</form>
            </div>
            <div id="form_container" class="form_container hide"></div>
            <div id="dialog_restart_chat" class="popup_blackout hide">
            	<div class="popup_restart_chat">
            		<h2>Restart chat</h2>
            		<p>Start conversation again?</p>
            		<div class="win_buttons">
            			<button id="restart_chat_btn" class="send_form_btn" onclick="clickRestartButton()">Yes</button>
            			<button class="cancel_form_btn" onclick="hideRestartChatDialog()">Close</button>
            		</div>
            	</div>
            </div>
        </div>""".format(
                         id = id, css = css, classname = self.classname,
                         style = style, debug_info = debug_info, lang = self.lang,
                         html_avatar = html_ava, agent_name = agent_name )

        result += """<script>
        let isFirstStart = true;
        window.chatId = '{id}';
    
        window.userUri = '{ws_server}';
        window.hostUrl = '{url}';
        window.scenarioGuid = '{guid}';
        window.userEmail = '{email}';
        window.userVariables = '{variables}';
        window.userProject = '{project_guid}';
        window.userAccessToken = '{user_access_token}';
        """.format(
                ws_server=self.ws_server,
                url=self.url,
                guid=self.guid,
                email=self.email,
                variables=variables,
                project_guid=self.project_guid,
                user_access_token=self.user_access_token,
                id=(self.id).replace('-', '_')
            )
            
        if self.onstart == "0":
        	result += "</script>"
        else:
        	result += """
            start('{ws_server}', '{url}', '{guid}', '{email}', '{variables}', '{project_guid}');
        </script>""".format(
                ws_server=self.ws_server,
                url=self.url,
                guid=self.guid,
                email=self.email,
                variables=variables,
                project_guid=self.project_guid
            )
        
        return VDOM_object.render(self, contents=result)
        

    def wysiwyg(self, contents=""):
        from scripting.legacy.wysiwyg import get_empty_wysiwyg_value
        self.width, self.height, self.top, self.left = [
    	    int(self.ide_width), int(self.ide_height), 
    	    int(self.ide_top), int(self.ide_left)
    	]
        image_id = "26dd9d86-01d9-f89e-46a7-3b4aebe6da44"
        result = get_empty_wysiwyg_value(self, image_id)
        return VDOM_object.wysiwyg(self, contents=result)


def on_update(object, attributes):
	o = object
	modifications = {}
	
	for attr in ["left", "width", "height", "top"]:
		if attr in attributes:
			attr_value = attributes[attr]
			obj_value = o.attributes.get(attr, '').lower()
			
			if obj_value.isdigit() and attr_value.isdigit():
				modifications[attr] = attr_value + "px"
				modifications["ide_"+ attr] = attr_value
			elif obj_value.endswith("px") and (attr_value.isdigit() or "px" in attr_value):
				modifications[attr] = attr_value.rstrip("px") + "px"
				modifications["ide_"+ attr] = attr_value.rstrip("px")
			elif attr_value.isdigit() or "px" in attr_value:
				modifications[attr] = attr_value if "px" in attr_value else obj_value
				modifications["ide_"+ attr] = attr_value.rstrip("px")
			else:
				modifications[attr] = attr_value

	attributes.update(modifications)
	
	ws_ex = u"wss://pitts.co/ws"
	
	url_ex = u"vails-pitts.prosuite.technology"
	
	guid_ex = u"ED216D6F-0106-8836-2468-351DF4E36926"
	
	email_ex = u"example@gmail.com"
	
	variables_ex = u"""\
%7B"%24lang"%3A"fr"%2C"%24userName"%3A"Alex%20Ivanov"%2C"%24userFirstName"%3A"Alex"%2C"%24userLastname"%3A"Ivanov"%2C"%24userMobile"%3A"999999"%2C"%24userEmail"%3A"a.ivanov.d%40gmail.com"%2C"%24now"%3A"10%2F01%2F2024%2015%3A30"%2C"%24agentName"%3A"Alex"%2C"%24mode"%3A"DEV"%7D"""

	var_json = u"""\
{
    "lang": "fr",
    "userName": "Alex Ivanov",
    "userFirstName": "Alex",
    "userLastname": "Ivanov",
    "userMobile": "9999999999",
    "userEmail": "a.ivanov.d@gmail.com",
    "now": "31/01/2024",
    "agentName": "Alex",
    "mode": "DEV"
}"""
	
	data_map = {
		"ws_ex": ws_ex,
		"url_ex": url_ex,
		"guid_ex": guid_ex,
		"email_ex": email_ex,
		"variables_ex": variables_ex,
		"empty": u""
	}

	if "skin_websocket" in attributes:
		skin_websocket = attributes["skin_websocket"]
		if skin_websocket == "1":
			attributes.update(ws_server=ws_ex, url=url_ex, guid=guid_ex, email=email_ex, variables=variables_ex)
		elif skin_websocket == "2":
			attributes.update(ws_server=ws_ex, url=url_ex, guid=guid_ex, email=email_ex, variables=var_json)
		else:
			attributes.update(ws_server=u"", url=u"", guid=u"", email=u"", variables=u"")
			
	if any(key in attributes for key in ["ws_server", "url", "guid", "email", "variables"]):
		if any(attributes.get(key) not in data_map.values() for key in ["ws_server", "url", "guid", "email", "variables"]):
			attributes.update(skin_websocket="3")
			
	users = u"""\
#%(id)s {

}
"""
	
	skin_mapping = {
		"0": users,
		"1": ""
	}
	if "skin" in attributes:
		skin = attributes["skin"]
		if skin in skin_mapping:
			attributes.update(style=skin_mapping[skin])
		else:
			attributes.update(skin="0")
			
	if "style" in attributes and attributes.get("style") not in skin_mapping.values():
		attributes.update(skin="0")
	
	return ""

def on_compile(object, attributes):
	for attr in ["left", "width", "height", "top"]:
		obj_value = object.attributes[attr]
		
		if obj_value.isdigit() or "px" in obj_value:
			object.attributes[attr] = obj_value.rstrip("px") + "px"
			object.attributes["ide_"+ attr] = obj_value.rstrip("px")]]></SourceCode>
  <Libraries>
    <Library Target="html"><![CDATA[<style type="text/css">
        .vdom_chat {
        
        }

</style>]]></Library>
    <Library Target="html"><![CDATA[<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">]]></Library>
    <Library Target="html"><![CDATA[<script type='text/javascript' src='/04c8a774-6d4f-84d7-ebaa-c0cac1d2622d.js'></script>]]></Library>
  </Libraries>
  <E2vdom>
    <Events>
      <Userinterfaceevents>
        <Event Name="click" Help="#Lang(509)">
          <Parameters>
            <Parameter Name="discussion_id" Order="" VbType="" Help="#Lang(901)"/>
            <Parameter Name="Y" Order="0" VbType="" Help="#Lang(902)"/>
          </Parameters>
        </Event>
        <Event Name="connected" Help="#Lang(511)">
          <Parameters>
            <Parameter Name="discussion_id" Order="" VbType="" Help="#Lang(903)"/>
          </Parameters>
        </Event>
        <Event Name="ctrlclick" Help="#Lang(512)">
          <Parameters>
            <Parameter Name="X" Order="" VbType="" Help="#Lang(904)"/>
            <Parameter Name="Y" Order="0" VbType="" Help="#Lang(905)"/>
          </Parameters>
        </Event>
        <Event Name="custom" Help="#Lang(513)">
          <Parameters>
            <Parameter Name="params" Order="" VbType="" Help="#Lang(906)"/>
          </Parameters>
        </Event>
        <Event Name="dblclick" Help="#Lang(514)">
          <Parameters>
            <Parameter Name="X" Order="0" VbType="" Help="#Lang(907)"/>
            <Parameter Name="Y" Order="0" VbType="" Help="#Lang(908)"/>
          </Parameters>
        </Event>
        <Event Name="mousedown" Help="#Lang(515)">
          <Parameters>
            <Parameter Name="X" Order="0" VbType="" Help="#Lang(909)"/>
            <Parameter Name="Y" Order="0" VbType="" Help="#Lang(911)"/>
          </Parameters>
        </Event>
        <Event Name="mousemove" Help="#Lang(516)">
          <Parameters>
            <Parameter Name="X" Order="0" VbType="" Help="#Lang(912)"/>
            <Parameter Name="Y" Order="0" VbType="" Help="#Lang(913)"/>
          </Parameters>
        </Event>
        <Event Name="mouseout" Help="#Lang(517)">
          <Parameters>
            <Parameter Name="X" Order="0" VbType="" Help="#Lang(914)"/>
            <Parameter Name="Y" Order="0" VbType="" Help="#Lang(915)"/>
          </Parameters>
        </Event>
        <Event Name="mouseover" Help="#Lang(518)">
          <Parameters>
            <Parameter Name="X" Order="0" VbType="" Help="#Lang(916)"/>
            <Parameter Name="Y" Order="0" VbType="" Help="#Lang(917)"/>
          </Parameters>
        </Event>
        <Event Name="mouseup" Help="#Lang(519)">
          <Parameters>
            <Parameter Name="X" Order="0" VbType="" Help="#Lang(918)"/>
            <Parameter Name="Y" Order="0" VbType="" Help="#Lang(919)"/>
          </Parameters>
        </Event>
        <Event Name="restart" Help="#Lang(521)">
          <Parameters>
            <Parameter Name="params" Order="" VbType="" Help="#Lang(921)"/>
          </Parameters>
        </Event>
      </Userinterfaceevents>
    </Events>
    <Actions>
      <Container ID="2330fe83-8cd6-4ed5-907d-11874e7ebcf4">
        <Action Help="#Lang(501)" InterfaceName="#Lang(601)" MethodName="changeCursor">
          <Parameters>
            <Parameter DefaultValue="" Interface="" InterfaceName="#Lang(701)" ScriptName="cursorType" Help="#Lang(801)" RegularExpressionValidation=".*"/>
          </Parameters>
          <SourceCode><![CDATA[this.domCont.style.cursor = cursorType;]]></SourceCode>
        </Action>
        <Action Help="#Lang(502)" InterfaceName="#Lang(602)" MethodName="dragStart">
          <Parameters/>
          <SourceCode><![CDATA[vdom_ui_dragStart(this.domCont);]]></SourceCode>
        </Action>
        <Action Help="#Lang(503)" InterfaceName="#Lang(603)" MethodName="dragStop">
          <Parameters/>
          <SourceCode><![CDATA[vdom_ui_dragStop();]]></SourceCode>
        </Action>
        <Action Help="#Lang(504)" InterfaceName="#Lang(604)" MethodName="hide">
          <Parameters>
            <Parameter DefaultValue="0" Interface="" InterfaceName="#Lang(702)" ScriptName="fade" Help="#Lang(802)" RegularExpressionValidation=".*"/>
          </Parameters>
          <SourceCode><![CDATA[vdom_ui_hide(this.domCont, fade);]]></SourceCode>
        </Action>
        <Action Help="#Lang(505)" InterfaceName="#Lang(605)" MethodName="setTransparency">
          <Parameters>
            <Parameter DefaultValue="0" Interface="" InterfaceName="#Lang(703)" ScriptName="value" Help="#Lang(803)" RegularExpressionValidation=".*"/>
          </Parameters>
          <SourceCode><![CDATA[var nn = parseInt(value,10) / 100;
$q(this.domCont).css('opacity', nn);]]></SourceCode>
        </Action>
        <Action Help="#Lang(506)" InterfaceName="#Lang(606)" MethodName="show">
          <Parameters>
            <Parameter DefaultValue="0" Interface="" InterfaceName="#Lang(704)" ScriptName="fade" Help="#Lang(804)" RegularExpressionValidation=".*"/>
          </Parameters>
          <SourceCode><![CDATA[vdom_ui_show(this.domCont, fade);]]></SourceCode>
        </Action>
        <Action Help="#Lang(507)" InterfaceName="#Lang(607)" MethodName="start">
          <Parameters>
            <Parameter DefaultValue="" Interface="" InterfaceName="#Lang(705)" ScriptName="email" Help="#Lang(805)" RegularExpressionValidation=""/>
            <Parameter DefaultValue="" Interface="" InterfaceName="#Lang(706)" ScriptName="guid" Help="#Lang(806)" RegularExpressionValidation=""/>
            <Parameter DefaultValue="" Interface="" InterfaceName="#Lang(707)" ScriptName="url" Help="#Lang(807)" RegularExpressionValidation=""/>
            <Parameter DefaultValue="" Interface="" InterfaceName="#Lang(708)" ScriptName="variables" Help="#Lang(808)" RegularExpressionValidation=""/>
            <Parameter DefaultValue="" Interface="" InterfaceName="#Lang(709)" ScriptName="ws_server" Help="#Lang(809)" RegularExpressionValidation=""/>
            <Parameter DefaultValue="" Interface="" InterfaceName="#Lang(711)" ScriptName="project_guid" Help="#Lang(811)" RegularExpressionValidation=""/>
          </Parameters>
          <SourceCode><![CDATA[start(ws_server, url, guid, email, variables, project_guid);
]]></SourceCode>
        </Action>
        <Action Help="#Lang(508)" InterfaceName="#Lang(608)" MethodName="toggleClass">
          <Parameters>
            <Parameter DefaultValue="" Interface="" InterfaceName="#Lang(712)" ScriptName="className" Help="#Lang(812)" RegularExpressionValidation=".*"/>
          </Parameters>
          <SourceCode><![CDATA[$q(this.domCont).toggleClass(className);]]></SourceCode>
        </Action>
      </Container>
    </Actions>
  </E2vdom>
</Type>